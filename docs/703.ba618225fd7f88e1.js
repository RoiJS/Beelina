"use strict";(self.webpackChunkBeelina_APP=self.webpackChunkBeelina_APP||[]).push([[703],{4703:(D,u,t)=>{t.r(u),t.d(u,{AuthModule:()=>N});var h=t(4190),p=t(5154),a=t(4221),c=t(6223);const m=e=>e.authCredentials,O=(0,a.createSelector)(m,e=>e.authCredentials),v=((0,a.createSelector)(m,e=>e.isLoading),(0,a.createSelector)(m,e=>e.error));var s=t(5839),y=t(8897),S=t(1416),P=t(3097),n=t(5879),x=t(6618),E=t(7867),C=t(2939),_=t(3064),f=t(9515),A=t(6610),T=t(2296),M=t(617);let b=(()=>{class e extends y.H{constructor(l,o,i,r,g,w,z,G){super(),this.authService=l,this.appVersionService=o,this.formBuilder=i,this.router=r,this.snackBarService=g,this.storageService=w,this.store=z,this.translateService=G,this._authForm=this.formBuilder.group({company:["",c.kI.required],username:["",c.kI.required],password:["",c.kI.required]})}ngOnInit(){}onSubmit(){const l=this.authForm.get("company").value;this._authForm.valid&&(this._isLoading=!0,this.store.dispatch(s.$r()),this.authService.checkCompany(l).subscribe({next:o=>{this.storageService.storeString("company",o.name),this.storageService.storeString("appSecretToken",o.dBHashName);const i=this.authForm.get("username").value,r=this.authForm.get("password").value;this.store.dispatch(s.y({username:i,password:r})),this.store.pipe((0,a.select)(O)).subscribe(g=>{g.accessToken&&this.router.navigate([this.getDefaultLandingPage()],{replaceUrl:!0})}),this.store.pipe((0,a.select)(v)).subscribe(g=>{g&&(this._isLoading=!1,this.snackBarService.open(g,this.translateService.instant("GENERAL_TEXTS.CLOSE")),console.error(g))})},error:o=>{this._isLoading=!1,this.snackBarService.open(o.message,this.translateService.instant("GENERAL_TEXTS.CLOSE")),console.error(o.message)}}))}getDefaultLandingPage(){let l="/sales";return this.authService.user.value.getModulePrivilege(S.X.Retail)>(0,P.O)(P.i.User)&&(l="/product-catalogue"),l}get authForm(){return this._authForm}get copyRightText(){return this.appVersionService.copyRightText}get appVersion(){return this.appVersionService.appVersion}get companyFieldPlaceHolder(){return this.translateService.instant("AUTH_PAGE.AUTH_FORM.COMPANY_FIELD.HINT")}get usernameFieldPlaceHolder(){return this.translateService.instant("AUTH_PAGE.AUTH_FORM.USERNAME_FIELD.HINT")}get passwordFieldPlaceHolder(){return this.translateService.instant("AUTH_PAGE.AUTH_FORM.PASSWORD_FIELD.HINT")}static#n=this.\u0275fac=function(o){return new(o||e)(n.\u0275\u0275directiveInject(x.e),n.\u0275\u0275directiveInject(E.h),n.\u0275\u0275directiveInject(c.qu),n.\u0275\u0275directiveInject(h.F0),n.\u0275\u0275directiveInject(C.ux),n.\u0275\u0275directiveInject(_.V),n.\u0275\u0275directiveInject(a.Store),n.\u0275\u0275directiveInject(f.sK))};static#e=this.\u0275cmp=n.\u0275\u0275defineComponent({type:e,selectors:[["app-auth-module"]],features:[n.\u0275\u0275InheritDefinitionFeature],decls:51,vars:25,consts:[[3,"busy"],[1,"login-main-container"],[1,"app-logo-container"],[1,"main-logo"],["src","../../assets/logo/mainlogo.png"],[1,"login-form-container"],[1,"lock-icon"],[1,"flip-in-ver-left-animation"],[1,"login-form"],[1,"form_container",3,"formGroup","ngSubmit"],[1,"title_container"],[1,"title"],[1,"subtitle"],[1,"input_container"],["for","company_field",1,"input_label"],[1,"icon"],["name","input-name","type","text","id","company_field","formControlName","company",1,"input_field",3,"placeholder"],["for","username_field",1,"input_label"],["name","input-name","type","text","id","username_field","formControlName","username",1,"input_field",3,"placeholder"],["for","password_field",1,"input_label"],["name","input-name","type","password","id","password_field","formControlName","password",1,"input_field",3,"placeholder"],[1,"login-form-buttons"],["mat-button","","mat-raised-button","","color","primary","type","submit"],[1,"login-footer"],[1,"login-footer-copyright-section"],[1,"login-footer-copyright-label"]],template:function(o,i){1&o&&(n.\u0275\u0275elementStart(0,"app-loader-layout",0)(1,"div",1)(2,"div",2)(3,"div",3),n.\u0275\u0275element(4,"img",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(5,"div",5)(6,"div",6)(7,"mat-icon",7),n.\u0275\u0275text(8,"lock"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(9,"div",8)(10,"form",9),n.\u0275\u0275listener("ngSubmit",function(){return i.onSubmit()}),n.\u0275\u0275elementStart(11,"div",10)(12,"p",11),n.\u0275\u0275text(13),n.\u0275\u0275pipe(14,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(15,"span",12),n.\u0275\u0275text(16),n.\u0275\u0275pipe(17,"translate"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(18,"div",13)(19,"label",14),n.\u0275\u0275text(20),n.\u0275\u0275pipe(21,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(22,"mat-icon",15),n.\u0275\u0275text(23,"work_outline"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(24,"input",16),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(25,"div",13)(26,"label",17),n.\u0275\u0275text(27),n.\u0275\u0275pipe(28,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(29,"mat-icon",15),n.\u0275\u0275text(30,"alternate_email"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(31,"input",18),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(32,"div",13)(33,"label",19),n.\u0275\u0275text(34),n.\u0275\u0275pipe(35,"translate"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(36,"mat-icon",15),n.\u0275\u0275text(37,"vpn_key"),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(38,"input",20),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(39,"div",21)(40,"button",22),n.\u0275\u0275text(41),n.\u0275\u0275pipe(42,"translate"),n.\u0275\u0275elementEnd()()()()(),n.\u0275\u0275elementStart(43,"div",23)(44,"div",24)(45,"label"),n.\u0275\u0275text(46),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(47,"label",25)(48,"mat-icon"),n.\u0275\u0275text(49,"copyright"),n.\u0275\u0275elementEnd(),n.\u0275\u0275text(50),n.\u0275\u0275elementEnd()()()()()),2&o&&(n.\u0275\u0275property("busy",i.isLoading),n.\u0275\u0275advance(10),n.\u0275\u0275property("formGroup",i.authForm),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(14,13,"AUTH_PAGE.MAIN_LABEL")," "),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(n.\u0275\u0275pipeBind1(17,15,"AUTH_PAGE.SUB_LABEL")),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate1("",n.\u0275\u0275pipeBind1(21,17,"AUTH_PAGE.AUTH_FORM.COMPANY_FIELD.LABEL"),":"),n.\u0275\u0275advance(4),n.\u0275\u0275property("placeholder",i.companyFieldPlaceHolder),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1("",n.\u0275\u0275pipeBind1(28,19,"AUTH_PAGE.AUTH_FORM.USERNAME_FIELD.LABEL")," :"),n.\u0275\u0275advance(4),n.\u0275\u0275property("placeholder",i.usernameFieldPlaceHolder),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1("",n.\u0275\u0275pipeBind1(35,21,"AUTH_PAGE.AUTH_FORM.PASSWORD_FIELD.LABEL")," :"),n.\u0275\u0275advance(4),n.\u0275\u0275property("placeholder",i.passwordFieldPlaceHolder),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate1(" ",n.\u0275\u0275pipeBind1(42,23,"AUTH_PAGE.AUTH_FORM.LOGIN_BUTTON.LABEL")," "),n.\u0275\u0275advance(5),n.\u0275\u0275textInterpolate(i.appVersion),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate(i.copyRightText))},dependencies:[A.l,T.lW,M.Hw,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,f.X$],styles:[".login-main-container[_ngcontent-%COMP%]{height:calc(100% - 30px);background:linear-gradient(300deg,#d69213 40%,#d89c2a 100%);padding:15px;display:flex;justify-content:space-around;flex-direction:column}.login-main-container[_ngcontent-%COMP%]   .app-logo-container[_ngcontent-%COMP%]{font-size:120px;text-align:center;color:#d89c2a;font-weight:700}.login-main-container[_ngcontent-%COMP%]   .app-logo-container[_ngcontent-%COMP%]   .main-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:120px;height:120px;border-width:5;border-color:#414141;background-color:#fff;border-radius:100%;padding:8px}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .lock-icon[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-self:center;width:90px;height:90px;background-color:#fff;border-radius:100%;margin-bottom:-50px;z-index:1}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .lock-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:55px;align-self:center;width:auto;height:auto}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .lock-icon[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:50px;text-align:center}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{align-self:center;display:flex;flex-direction:column;justify-content:flex-end;width:95%;border-radius:10px;background:linear-gradient(120deg,#e7e7e7 0%,#ffffff 50%,#e7e7e7 100%)}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:65px 20px 20px}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-form-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .login-form-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:end;color:#fff;width:100%}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .form_container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:15px;padding:50px 40px 20px;box-shadow:0 106px 42px #00000003,0 59px 36px #0000000d,0 26px 26px #00000017,0 7px 15px #0000001a,0 0 #0000001a;border-radius:11px;font-family:Inter,sans-serif}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .title_container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:700;color:#d89c2a}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.725rem;max-width:80%;text-align:center;line-height:1.1rem;color:#8b8e98}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .input_container[_ngcontent-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content;position:relative;display:flex;flex-direction:column;gap:5px}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:25px;position:absolute;z-index:99;left:12px;bottom:9px}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .input_label[_ngcontent-%COMP%]{font-size:.75rem;color:#8b8e98;font-weight:600}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .input_field[_ngcontent-%COMP%]{width:auto;height:40px;padding:0 0 0 40px;border-radius:7px;outline:none;border:1px solid #e5e5e5;filter:drop-shadow(0px 1px 0px #efefef) drop-shadow(0px 1px .5px rgba(239,239,239,.5));transition:all .3s cubic-bezier(.15,.83,.66,1)}.login-main-container[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .input_field[_ngcontent-%COMP%]:focus{border:1px solid transparent;box-shadow:0 0 0 2px #d89c2a;background-color:transparent}.login-main-container[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]{text-align:center;font-size:12px;padding:5px;display:flex;justify-content:space-around;color:#fff}.login-main-container[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]   .login-footer-copyright-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.login-main-container[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]   .login-footer-copyright-section[_ngcontent-%COMP%]   .login-footer-copyright-label[_ngcontent-%COMP%]{display:flex}.login-main-container[_ngcontent-%COMP%]   .login-footer[_ngcontent-%COMP%]   .login-footer-copyright-section[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px}.login-main-container[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]{background:linear-gradient(300deg,#d69213 40%,#d89c2a 100%);border-radius:50%;color:#fff;font-size:15px;font-weight:700;text-transform:uppercase}.login-main-container[_ngcontent-%COMP%]   .forgot-password-link[_ngcontent-%COMP%]{font-size:12px;text-align:center}"]})}return e})();var I=t(6814),L=t(6924),F=t(4664),H=t(7398),U=t(6306),B=t(2096);let j=(()=>{class e{constructor(l,o){this.actions$=l,this.authService=o,this.login$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(s.y),(0,F.w)(i=>this.authService.login(i.username,i.password).pipe((0,H.U)(r=>{const g={accessToken:r.accessToken,refreshToken:r.refreshToken,expiresIn:r.expiresIn};return this.authService.handleLogin(r.accessToken,r.refreshToken,r.expiresIn),s.H3({authTokenCredentials:g})}),(0,U.K)(r=>(0,B.of)(s.jb({error:r.message})))))))}static#n=this.\u0275fac=function(o){return new(o||e)(n.\u0275\u0275inject(p.eX),n.\u0275\u0275inject(x.e))};static#e=this.\u0275prov=n.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const k=(0,a.createReducer)({isLoading:!1,isUpdateLoading:!1,authCredentials:{accessToken:null,refreshToken:null,expiresIn:null},error:null},(0,a.on)(s.y,(e,d)=>({...e,isLoading:!0})),(0,a.on)(s.H3,(e,d)=>({...e,isLoading:!1,authCredentials:d.authTokenCredentials})),(0,a.on)(s.jb,(e,d)=>({...e,error:d.error})),(0,a.on)(s.$r,(e,d)=>({...e,isLoading:!1,isUpdateLoading:!1,authCredentials:{accessToken:null,refreshToken:null,expiresIn:null},error:null})));let N=(()=>{class e{static#n=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=n.\u0275\u0275defineNgModule({type:e});static#t=this.\u0275inj=n.\u0275\u0275defineInjector({imports:[I.ez,L._,M.Ps,C.ZX,c.UX,h.Bz.forChild([{path:"",component:b,title:"AUTH_PAGE.TITLE"}]),f.aw.forChild(),a.StoreModule.forFeature("authCredentials",k),p.sQ.forFeature([j])]})}return e})()}}]);