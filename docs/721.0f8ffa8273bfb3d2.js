"use strict";(self.webpackChunkBeelina_APP=self.webpackChunkBeelina_APP||[]).push([[721],{9721:(G,p,i)=>{i.r(p),i.d(p,{TransactionDetailsModule:()=>L});var l=i(4190),c=i(9515),r=i(6814),d=i(9038),m=i(2939),_=i(9014),T=i(8897),t=i(5879),v=i(5253),C=i(8761),E=i(6610),O=i(3427),g=i(2296),f=i(6385);function A(n,s){1&n&&(t.\u0275\u0275elementStart(0,"span",20),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"GENERAL_TEXTS.PAID")))}function S(n,s){1&n&&(t.\u0275\u0275elementStart(0,"span",21),t.\u0275\u0275text(1),t.\u0275\u0275pipe(2,"translate"),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(2,1,"GENERAL_TEXTS.UNPAID")))}const I=function(n){return{unpaid:n}};function P(n,s){if(1&n&&(t.\u0275\u0275elementStart(0,"mat-list-item",13)(1,"div",14)(2,"div",15)(3,"span"),t.\u0275\u0275text(4),t.\u0275\u0275pipe(5,"translate"),t.\u0275\u0275element(6,"br"),t.\u0275\u0275text(7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"span")(9,"span"),t.\u0275\u0275text(10,"X"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"span"),t.\u0275\u0275text(12),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(13,"div",16)(14,"span"),t.\u0275\u0275text(15),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(16,"div",17),t.\u0275\u0275template(17,A,3,3,"span",18),t.\u0275\u0275template(18,S,3,3,"span",19),t.\u0275\u0275elementEnd()()()),2&n){const e=s.$implicit;t.\u0275\u0275advance(1),t.\u0275\u0275property("ngClass",t.\u0275\u0275pureFunction1(10,I,!(null!=e&&e.isPaid))),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate2(" (",t.\u0275\u0275pipeBind1(5,8,"PRODUCTS_CATALOGUE_PAGE.PRODUCT_CARD_ITEM.CODE"),": ",null==e.product?null:e.product.code,") "),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",null==e.product?null:e.product.name," "),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(e.quantity),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(null==e?null:e.priceFormatted),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",null==e?null:e.isPaid),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!(null!=e&&e.isPaid))}}function h(n,s){if(1&n&&(t.\u0275\u0275elementStart(0,"div",7)(1,"span"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"GENERAL_TEXTS.BALANCE")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.transaction.balanceFormatted)}}function x(n,s){if(1&n&&(t.\u0275\u0275elementStart(0,"div",7)(1,"span"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"GENERAL_TEXTS.GROSS_TOTAL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.transaction.grossTotalFormatted)}}function R(n,s){if(1&n&&(t.\u0275\u0275elementStart(0,"div",7)(1,"span"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"PRODUCT_CART_PAGE.FORM_CONTROL_SECTION.DISCOUNT_CONTROL.LABEL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.transaction.discount)}}function M(n,s){if(1&n&&(t.\u0275\u0275elementStart(0,"div",7)(1,"span"),t.\u0275\u0275text(2),t.\u0275\u0275pipe(3,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()),2&n){const e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(3,2,"GENERAL_TEXTS.NET_TOTAL")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(e.transaction.netTotalFormatted)}}let N=(()=>{class n extends T.H{constructor(e,o,a,u,b,D){super(),this.activatedRoute=e,this.dialogService=o,this.router=a,this.snackBarService=u,this.transactionService=b,this.translateService=D}ngOnInit(){this._transactionId=+this.activatedRoute.snapshot.paramMap.get("id"),this._isLoading=!0,this.transactionService.getTransaction(this._transactionId).subscribe(e=>{this._isLoading=!1,this._transaction=e})}markTransactionAsPaid(){this.dialogService.openConfirmation(this.translateService.instant("TRANSACTION_DETAILS_PAGE.MARK_TRANSACTION_AS_PAID_DIALOG.TITLE"),this.translateService.instant("TRANSACTION_DETAILS_PAGE.MARK_TRANSACTION_AS_PAID_DIALOG.CONFIRM")).subscribe(e=>{e==_.E.YES&&this.transactionService.markTransactionAsPaid(this._transactionId).subscribe({next:()=>{this.snackBarService.open(this.translateService.instant("TRANSACTION_DETAILS_PAGE.MARK_TRANSACTION_AS_PAID_DIALOG.SUCCESS_MESSAGE"),this.translateService.instant("GENERAL_TEXTS.CLOSE"),{duration:5e3}),this.router.navigate(["transaction-history"])},error:()=>{this.snackBarService.open(this.translateService.instant("TRANSACTION_DETAILS_PAGE.MARK_TRANSACTION_AS_PAID_DIALOG.ERROR_MESSAGE"),this.translateService.instant("GENERAL_TEXTS.CLOSE"),{duration:5e3})}})})}get transaction(){return this._transaction}static#t=this.\u0275fac=function(o){return new(o||n)(t.\u0275\u0275directiveInject(l.gz),t.\u0275\u0275directiveInject(v.x),t.\u0275\u0275directiveInject(l.F0),t.\u0275\u0275directiveInject(m.ux),t.\u0275\u0275directiveInject(C.pX),t.\u0275\u0275directiveInject(c.sK))};static#n=this.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-transaction-details"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:38,vars:22,consts:[[3,"title"],[3,"busy"],[1,"page-container"],[1,"panel","transaction-details-panel"],[1,"panel__details-group-panel","transaction-details-panel__details-group-panel"],[1,"panel__header-section"],[1,"panel__body-section","transaction-details-panel__body-section"],[1,"product-transaction-amount-information"],["role","list",1,"product-transaction-list"],["role","listitem",4,"ngFor","ngForOf"],["class","product-transaction-amount-information",4,"ngIf"],[1,"panel__footer-section","transaction-details-panel__footer-section"],["mat-raised-button","","color","primary",3,"disabled","click"],["role","listitem"],[1,"product-transaction-list__item-section",3,"ngClass"],[1,"product-transaction-information"],[1,"product-transaction-information-price"],[1,"product-transaction-information-status"],["class","product-transaction-information-status--paid",4,"ngIf"],["class","product-transaction-information-status--unpaid",4,"ngIf"],[1,"product-transaction-information-status--paid"],[1,"product-transaction-information-status--unpaid"]],template:function(o,a){1&o&&(t.\u0275\u0275element(0,"app-tool-bar",0),t.\u0275\u0275elementStart(1,"app-loader-layout",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),t.\u0275\u0275text(6),t.\u0275\u0275pipe(7,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"div",6)(9,"div",7)(10,"span"),t.\u0275\u0275text(11),t.\u0275\u0275pipe(12,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(13,"span"),t.\u0275\u0275text(14),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(15,"br"),t.\u0275\u0275elementStart(16,"div",7)(17,"span"),t.\u0275\u0275text(18),t.\u0275\u0275pipe(19,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"span"),t.\u0275\u0275text(21),t.\u0275\u0275elementEnd()(),t.\u0275\u0275element(22,"br")(23,"mat-divider"),t.\u0275\u0275elementStart(24,"mat-list",8),t.\u0275\u0275template(25,P,19,12,"mat-list-item",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(26,"br"),t.\u0275\u0275template(27,h,6,4,"div",10),t.\u0275\u0275element(28,"br"),t.\u0275\u0275template(29,x,6,4,"div",10),t.\u0275\u0275element(30,"br"),t.\u0275\u0275template(31,R,6,4,"div",10),t.\u0275\u0275element(32,"br"),t.\u0275\u0275template(33,M,6,4,"div",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(34,"div",11)(35,"button",12),t.\u0275\u0275listener("click",function(){return a.markTransactionAsPaid()}),t.\u0275\u0275text(36),t.\u0275\u0275pipe(37,"translate"),t.\u0275\u0275elementEnd()()()()()()),2&o&&(t.\u0275\u0275property("title",null==a.transaction||null==a.transaction.store?null:a.transaction.store.name),t.\u0275\u0275advance(1),t.\u0275\u0275property("busy",a.isLoading),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(7,14,"PRODUCT_CART_PAGE.FORM_CONTROL_SECTION.HEADER_TITLE")," "),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(12,16,"PRODUCT_CART_PAGE.FORM_CONTROL_SECTION.REGISTERED_DATE_CONTROL.LABEL"),":"),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(null==a.transaction?null:a.transaction.dateCreatedFormatted),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(19,18,"PRODUCT_CART_PAGE.FORM_CONTROL_SECTION.INVOICE_NO_CONTROL.LABEL"),":"),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(null==a.transaction?null:a.transaction.invoiceNo),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngForOf",null==a.transaction?null:a.transaction.productTransactions),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",(null==a.transaction||null==a.transaction.productTransactions?null:a.transaction.productTransactions.length)>0),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",(null==a.transaction||null==a.transaction.productTransactions?null:a.transaction.productTransactions.length)>0),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",(null==a.transaction||null==a.transaction.productTransactions?null:a.transaction.productTransactions.length)>0),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",(null==a.transaction||null==a.transaction.productTransactions?null:a.transaction.productTransactions.length)>0),t.\u0275\u0275advance(2),t.\u0275\u0275property("disabled",!(null!=a.transaction&&a.transaction.hasUnpaidProductTransaction)),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(37,20,"GENERAL_TEXTS.MARK_AS_PAID")," "))},dependencies:[r.mk,r.sg,r.O5,E.l,O.o,g.lW,f.d,d.i$,d.Tg,c.X$],styles:[".transaction-details-panel[_ngcontent-%COMP%]{height:100%}.transaction-details-panel__details-group-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:90vh}.transaction-details-panel__body-section[_ngcontent-%COMP%]{padding:15px 0}.transaction-details-panel__body-section[_ngcontent-%COMP%]   .product-transaction-list[_ngcontent-%COMP%]{max-height:200px;overflow:auto;margin-bottom:15px}.transaction-details-panel__body-section[_ngcontent-%COMP%]   .product-transaction-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom-style:solid;border-bottom-color:var(--mat-divider-color);border-bottom-width:var(--mat-divider-width);padding:10px 0}.transaction-details-panel__body-section[_ngcontent-%COMP%]   .product-transaction-list__item-section[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:100%;font-size:14px}.transaction-details-panel__body-section[_ngcontent-%COMP%]   .product-transaction-list__item-section[_ngcontent-%COMP%]   .product-transaction-information[_ngcontent-%COMP%]{width:180px;display:flex;justify-content:space-between;align-self:center}.transaction-details-panel__body-section[_ngcontent-%COMP%]   .product-transaction-list__item-section[_ngcontent-%COMP%]   .product-transaction-information-price[_ngcontent-%COMP%]{align-self:center}.transaction-details-panel__body-section[_ngcontent-%COMP%]   .product-transaction-list__item-section[_ngcontent-%COMP%]   .product-transaction-information-status[_ngcontent-%COMP%]{align-self:center;text-align:center}.transaction-details-panel__body-section[_ngcontent-%COMP%]   .product-transaction-list__item-section[_ngcontent-%COMP%]   .product-transaction-information-status[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:2px;color:#fff;border-radius:15px;width:50px;display:block;font-size:12px}.transaction-details-panel__body-section[_ngcontent-%COMP%]   .product-transaction-list__item-section[_ngcontent-%COMP%]   .product-transaction-information-status--paid[_ngcontent-%COMP%]{background-color:#20c920}.transaction-details-panel__body-section[_ngcontent-%COMP%]   .product-transaction-list__item-section[_ngcontent-%COMP%]   .product-transaction-information-status--unpaid[_ngcontent-%COMP%]{background-color:#e02d00}.transaction-details-panel__body-section[_ngcontent-%COMP%]   .product-transaction-amount-information[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:100%;font-size:15px;font-weight:700}.transaction-details-panel__footer-section[_ngcontent-%COMP%]{padding:0}.transaction-details-panel__footer-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]})}return n})();var y=i(6924);let L=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#n=this.\u0275mod=t.\u0275\u0275defineNgModule({type:n});static#e=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[r.ez,y._,d.ie,m.ZX,l.Bz.forChild([{path:"",component:N,title:"TRANSACTION_DETAILS_PAGE.TITLE"}]),c.aw.forChild()]})}return n})()}}]);