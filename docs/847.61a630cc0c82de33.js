"use strict";(self.webpackChunkBeelina_APP=self.webpackChunkBeelina_APP||[]).push([[847],{6847:(b,v,a)=>{a.r(v),a.d(v,{ReportDetailsModule:()=>M});var E=a(4190),p=a(9515),h=a(2939),c=a(8034),I=a(3680),R=a(2032),i=a(6223),S=a(8525),t=a(5879),C=a(8897),O=a(6676),T=a.n(O);let u=(()=>{class r{constructor(n){this.translateService=n}ngOnInit(){}value(n=null){console.warn("Implement value() function!")}validate(){return!0}setControlLabelIdentifier(n){this.controlLabelIdentifier=n}get controLabel(){return this.translateService.instant(this.controlLabelIdentifier)}static#t=this.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(p.sK))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["app-base-control"]],decls:0,vars:0,template:function(e,o){}})}return r})();var l=a(4170);let f=(()=>{class r extends u{constructor(n,e){super(e),this.formBuilder=n,this.translateService=e,this._form=this.formBuilder.group({date:[new Date,[i.kI.required]]})}ngOnInit(){}value(n){const e=this._form.get("date").value;return T()(e).format("yyyy-MM-DD")}validate(){return this._form.markAllAsTouched(),this._form.valid}get form(){return this._form}static#t=this.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(i.qu),t.\u0275\u0275directiveInject(p.sK))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["app-date-picker"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:10,vars:4,consts:[[3,"formGroup"],["appearance","fill",1,"date-picker-control"],["matInput","","formControlName","date",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""]],template:function(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(4,"input",2),t.\u0275\u0275elementStart(5,"mat-hint"),t.\u0275\u0275text(6,"MM/DD/YYYY"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(7,"mat-datepicker-toggle",3)(8,"mat-datepicker",null,4),t.\u0275\u0275elementEnd()()),2&e){const s=t.\u0275\u0275reference(9);t.\u0275\u0275property("formGroup",o.form),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("",o.controLabel,":"),t.\u0275\u0275advance(1),t.\u0275\u0275property("matDatepicker",s),t.\u0275\u0275advance(3),t.\u0275\u0275property("for",s)}},dependencies:[c.Mq,c.hl,c.nW,R.Nt,l.KE,l.hX,l.bx,l.R9,i.Fj,i.JJ,i.JL,i.sg,i.u]})}return r})(),D=(()=>{class r extends u{constructor(n,e){super(e),this.formBuilder=n,this.translateService=e,this._form=this.formBuilder.group({dateFrom:[null],dateTo:[null]})}ngOnInit(){}value(n){return{dateFrom:this._form.get("dateFrom").value,dateTo:this._form.get("dateTo").value}}get form(){return this._form}static#t=this.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(i.qu),t.\u0275\u0275directiveInject(p.sK))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["app-date-range"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:12,vars:4,consts:[[3,"formGroup"],["appearance","fill"],[3,"rangePicker"],["matStartDate","","placeholder","Start Date","formControlName","dateFrom"],["matEndDate","","placeholder","End Date","formControlName","dateTo"],["matSuffix","",3,"for"],["picker",""]],template:function(e,o){if(1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"mat-date-range-input",2),t.\u0275\u0275element(5,"input",3)(6,"input",4),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(7,"mat-hint"),t.\u0275\u0275text(8,"MM/DD/YYYY \u2013 MM/DD/YYYY"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(9,"mat-datepicker-toggle",5)(10,"mat-date-range-picker",null,6),t.\u0275\u0275elementEnd()()),2&e){const s=t.\u0275\u0275reference(11);t.\u0275\u0275property("formGroup",o.form),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("",o.controLabel,":"),t.\u0275\u0275advance(1),t.\u0275\u0275property("rangePicker",s),t.\u0275\u0275advance(5),t.\u0275\u0275property("for",s)}},dependencies:[c.nW,c.wx,c.zY,c.By,c._g,l.KE,l.hX,l.bx,l.R9,i.Fj,i.JJ,i.JL,i.sg,i.u]})}return r})();var d=a(9886);const g={DateRangeControl:D,DatePickerControl:f,StartDatePickerControl:f,EndDatePickerControl:f,SortOrderDropdownControl:(()=>{class r extends u{constructor(n,e){super(e),this.formBuilder=n,this.translateService=e,this._form=this.formBuilder.group({sortOrder:[d.q.DESCENDING]})}ngOnInit(){}value(n){return(this._form.get("sortOrder").value===d.q.ASCENDING?d.D.ASCENDING:d.D.DESCENDING).toString()}get form(){return this._form}static#t=this.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(i.qu),t.\u0275\u0275directiveInject(p.sK))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["app-sort-order-control"]],features:[t.\u0275\u0275InheritDefinitionFeature],decls:12,vars:12,consts:[[3,"formGroup"],["appearance","fill"],["formControlName","sortOrder"],[3,"value"]],template:function(e,o){1&e&&(t.\u0275\u0275elementStart(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),t.\u0275\u0275text(3),t.\u0275\u0275pipe(4,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"mat-select",2)(6,"mat-option",3),t.\u0275\u0275text(7),t.\u0275\u0275pipe(8,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"mat-option",3),t.\u0275\u0275text(10),t.\u0275\u0275pipe(11,"translate"),t.\u0275\u0275elementEnd()()()()),2&e&&(t.\u0275\u0275property("formGroup",o.form),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(4,6,"REPORT_DETAILS_PAGE.CONTROL_INFORMATION.SORT_ORDER_CONTROL.LABEL"),":"),t.\u0275\u0275advance(3),t.\u0275\u0275property("value","ASC"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(8,8,"REPORT_DETAILS_PAGE.CONTROL_INFORMATION.SORT_ORDER_CONTROL.ASCENDING_OPTION")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("value","DESC"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(11,10,"REPORT_DETAILS_PAGE.CONTROL_INFORMATION.SORT_ORDER_CONTROL.DESCENDING_OPTION")," "))},dependencies:[l.KE,l.hX,i.JJ,i.JL,i.sg,i.u,S.gD,I.ey,p.X$]})}return r})()};var A=a(9014),N=a(5253),L=a(5661),y=a(6610),P=a(3427),G=a(2296);const x=["container"];let F=(()=>{class r extends C.H{constructor(n,e,o,s,m){super(),this.activatedRoute=n,this.dialogService=e,this.snackBarService=o,this.reportService=s,this.translateService=m,this.controlComponents=new Array,this._reportId=+this.activatedRoute.snapshot.paramMap.get("id"),this._isLoading=!0}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.reportService.getReportInformation(this._reportId).subscribe(n=>{this._isLoading=!1,this._reportInformation=n,this._reportName=this.translateService.instant(`REPORTS_PAGE.REPORTS_INFORMATION.${n.nameTextIdentifier}`),this._reportDescription=this.translateService.instant(`REPORTS_PAGE.REPORTS_INFORMATION.${n.descriptionTextIdentifier}`),this._reportInformation.reportControlsRelations.forEach(e=>{this.attachComponentDynamically(e.reportControlId,`${e.reportControl.name}Control`,e.reportControl.labelIdentifier)})})},0)}attachComponentDynamically(n,e,o){const m=this.container.createComponent(g[e]).instance;m.setControlLabelIdentifier(o),this.controlComponents.push({id:n,name:e,componentInstance:m})}validate(){return-1===this.controlComponents.map(e=>e.componentInstance.validate()).indexOf(!1)}generateReport(){if(this.validate()){const n=this.controlComponents.map(e=>{const o=new B;return o.controlId=e.id,o.currentValue=e.componentInstance.value(),o});this.dialogService.openConfirmation(this.translateService.instant("REPORT_DETAILS_PAGE.GENERATE_REPORT_DIALOG.TITLE"),this.translateService.instant("REPORT_DETAILS_PAGE.GENERATE_REPORT_DIALOG.CONFIRM")).subscribe({next:e=>{e===A.E.YES&&(this._isLoading=!0,this.reportService.generateReport(this._reportId,n).subscribe(()=>{this._isLoading=!1,this.snackBarService.open(this.translateService.instant("REPORT_DETAILS_PAGE.GENERATE_REPORT_DIALOG.SUCCESS_MESSAGE"),this.translateService.instant("GENERAL_TEXTS.CLOSE"))}))},error:()=>{this._isLoading=!1,this.snackBarService.open(this.translateService.instant("REPORT_DETAILS_PAGE.GENERATE_REPORT_DIALOG.ERROR_MESSAGE"),this.translateService.instant("GENERAL_TEXTS.CLOSE"))}})}}get reportName(){return this._reportName}get reportDescription(){return this._reportDescription}static#t=this.\u0275fac=function(e){return new(e||r)(t.\u0275\u0275directiveInject(E.gz),t.\u0275\u0275directiveInject(N.x),t.\u0275\u0275directiveInject(h.ux),t.\u0275\u0275directiveInject(L.F),t.\u0275\u0275directiveInject(p.sK))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:r,selectors:[["app-report-details"]],viewQuery:function(e,o){if(1&e&&t.\u0275\u0275viewQuery(x,5,t.ViewContainerRef),2&e){let s;t.\u0275\u0275queryRefresh(s=t.\u0275\u0275loadQuery())&&(o.container=s.first)}},features:[t.\u0275\u0275InheritDefinitionFeature],decls:22,vars:12,consts:[[3,"title"],[3,"busy"],[1,"page-container","slide-in-left-animation"],[1,"page-container__page-divider","scale-in-center-animation"],[1,"page-information-description"],[1,"panel"],[1,"panel__details-group-panel"],[1,"panel__header-section"],[1,"panel__body-section"],["container",""],[1,"panel__footer-section"],["mat-raised-button","","color","primary",2,"width","100%",3,"click"]],template:function(e,o){1&e&&(t.\u0275\u0275element(0,"app-tool-bar",0),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"app-loader-layout",1)(3,"div",2)(4,"div",3)(5,"label"),t.\u0275\u0275text(6),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(7,"br"),t.\u0275\u0275elementStart(8,"span",4),t.\u0275\u0275text(9),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(10,"div",5)(11,"div",6)(12,"div",7),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(15,"div",8),t.\u0275\u0275element(16,"div",null,9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(18,"div",10)(19,"button",11),t.\u0275\u0275listener("click",function(){return o.generateReport()}),t.\u0275\u0275text(20),t.\u0275\u0275pipe(21,"translate"),t.\u0275\u0275elementEnd()()()()()),2&e&&(t.\u0275\u0275property("title",t.\u0275\u0275pipeBind1(1,6,"GENERAL_TEXTS.BEELINA")),t.\u0275\u0275advance(2),t.\u0275\u0275property("busy",o.isLoading),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate(o.reportName),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(o.reportDescription),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(14,8,"REPORT_DETAILS_PAGE.TITLE")," "),t.\u0275\u0275advance(7),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(21,10,"REPORT_DETAILS_PAGE.BUTTON_OPTIONS.GENERATE_EXCEL_FILE")," "))},dependencies:[y.l,P.o,G.lW,p.X$]})}return r})();class B{}var _=a(6924);let M=(()=>{class r{static#t=this.\u0275fac=function(e){return new(e||r)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:r});static#n=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[_._,h.ZX,c.FA,I.XK,R.c,i.UX,S.LD,E.Bz.forChild([{path:"",component:F}]),p.aw.forChild()]})}return r})()}}]);