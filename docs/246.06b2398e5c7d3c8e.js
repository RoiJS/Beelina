"use strict";(self.webpackChunkBeelina_APP=self.webpackChunkBeelina_APP||[]).push([[246],{5246:(K,u,e)=>{e.r(u),e.d(u,{AddCustomerDetailsModule:()=>_});var m=e(4190),T=e(6924),p=e(9515),O=e(2032),h=e(8525),d=e(4630),s=e(6223),c=e(6814),v=e(617),E=e(4221),A=e(7921),C=e(7398),L=e(3100),I=e(6347),i=e(1675),y=e(5190),D=e(2928),f=e(9014),R=e(4526),t=e(5879),M=e(5253),N=e(3659),g=e(2939),F=e(6610),B=e(3427),G=e(2296),S=e(4170),P=e(3680);function U(o,b){if(1&o&&(t.\u0275\u0275elementStart(0,"mat-option",15),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&o){const a=b.$implicit;t.\u0275\u0275property("value",a.name),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",a.name," ")}}let x=(()=>{class o{constructor(a,n,r,l,j,Y,V,X){this.activatedRoute=a,this.store=n,this.dialogService=r,this.customerStoreService=l,this.formBuilder=j,this.router=Y,this.snackBarService=V,this.translateService=X,this._paymentMethodOptions=[],this._customerForm=this.formBuilder.group({name:["",s.kI.required],address:[""],outletType:[null],paymentMethod:["",s.kI.required],barangay:["",s.kI.required]}),this.$isLoading=this.store.pipe((0,E.select)(D.Cz))}ngOnInit(){const a=this._customerForm.get("barangay");this._barangay=this.activatedRoute.snapshot.paramMap.get("barangay"),a.setValue(this._barangay),a.disable(),this.store.dispatch(y.ge()),this.store.dispatch(I.V6()),this._paymentMethodOptionsSubscription=this.store.pipe((0,E.select)(L.Ch)).subscribe(n=>{this._paymentMethodOptions=n}),this._paymentMethodFilterOptions=this._customerForm.get("paymentMethod").valueChanges.pipe((0,A.O)(""),(0,C.U)(n=>this._filterPaymentMethods(n||"")))}ngOnDestroy(){this._paymentMethodOptionsSubscription.unsubscribe(),this.store.dispatch(i.IT())}saveNewCustomer(){const a=new R.k;a.name=this._customerForm.get("name").value,a.address=this._customerForm.get("address").value,a.outletType=this._customerForm.get("outletType").value,a.paymentMethod.name=this._customerForm.get("paymentMethod").value,a.barangay.name=this._customerForm.get("barangay").value,this._customerForm.markAllAsTouched(),this._customerForm.valid&&this.dialogService.openConfirmation(this.translateService.instant("ADD_CUSTOMER_DETAILS_PAGE.SAVE_NEW_CUSTOMER_DIALOG.TITLE"),this.translateService.instant("ADD_CUSTOMER_DETAILS_PAGE.SAVE_NEW_CUSTOMER_DIALOG.CONFIRM")).subscribe(n=>{n===f.E.YES&&(this.store.dispatch(i.sv({state:!0})),this.customerStoreService.updateStoreInformation(a).subscribe({next:()=>{this.snackBarService.open(this.translateService.instant("ADD_CUSTOMER_DETAILS_PAGE.SAVE_NEW_CUSTOMER_DIALOG.SUCCESS_MESSAGE"),this.translateService.instant("GENERAL_TEXTS.CLOSE")),this.store.dispatch(i.sv({state:!1})),this.router.navigate([`/barangays/${this._barangay}`])},error:()=>{this.snackBarService.open(this.translateService.instant("ADD_CUSTOMER_DETAILS_PAGE.SAVE_NEW_CUSTOMER_DIALOG.ERROR_MESSAGE"),this.translateService.instant("GENERAL_TEXTS.CLOSE")),this.store.dispatch(i.sv({state:!1}))}}))})}_filterPaymentMethods(a){const n=a?.toLowerCase();return this._paymentMethodOptions.filter(r=>r.name?.toLowerCase().includes(n))}get customerForm(){return this._customerForm}get paymentMethodFilterOptions(){return this._paymentMethodFilterOptions}static#t=this.\u0275fac=function(n){return new(n||o)(t.\u0275\u0275directiveInject(m.gz),t.\u0275\u0275directiveInject(E.Store),t.\u0275\u0275directiveInject(M.x),t.\u0275\u0275directiveInject(N.L),t.\u0275\u0275directiveInject(s.qu),t.\u0275\u0275directiveInject(m.F0),t.\u0275\u0275directiveInject(g.ux),t.\u0275\u0275directiveInject(p.sK))};static#e=this.\u0275cmp=t.\u0275\u0275defineComponent({type:o,selectors:[["app-add-customer-details"]],decls:50,vars:37,consts:[[3,"title"],["mat-icon-button","",1,"toolbar-option",3,"click"],[3,"busy"],[1,"page-container","slide-in-left-animation"],[1,"panel"],[1,"panel__details-group-panel",3,"formGroup"],[1,"panel__header-section"],[1,"panel__body-section"],["appearance","fill"],["matInput","","type","text","formControlName","name"],["matInput","","type","text","formControlName","address"],["type","text","matInput","","formControlName","paymentMethod",3,"matAutocomplete"],["paymentMethodAuto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["formControlName","outletType"],[3,"value"],["type","text","matInput","","formControlName","barangay"]],template:function(n,r){if(1&n&&(t.\u0275\u0275elementStart(0,"app-tool-bar",0),t.\u0275\u0275pipe(1,"translate"),t.\u0275\u0275elementStart(2,"button",1),t.\u0275\u0275listener("click",function(){return r.saveNewCustomer()}),t.\u0275\u0275elementStart(3,"mat-icon"),t.\u0275\u0275text(4,"save"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(5,"app-loader-layout",2),t.\u0275\u0275pipe(6,"async"),t.\u0275\u0275elementStart(7,"div",3)(8,"div",4)(9,"div",5)(10,"div",6)(11,"label"),t.\u0275\u0275text(12),t.\u0275\u0275pipe(13,"translate"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"div",7)(15,"mat-form-field",8)(16,"mat-label"),t.\u0275\u0275text(17),t.\u0275\u0275pipe(18,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(19,"input",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"mat-form-field",8)(21,"mat-label"),t.\u0275\u0275text(22),t.\u0275\u0275pipe(23,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(24,"input",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(25,"mat-form-field",8)(26,"mat-label"),t.\u0275\u0275text(27),t.\u0275\u0275pipe(28,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(29,"input",11),t.\u0275\u0275elementStart(30,"mat-autocomplete",null,12),t.\u0275\u0275template(32,U,2,2,"mat-option",13),t.\u0275\u0275pipe(33,"async"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(34,"mat-form-field",8)(35,"mat-label"),t.\u0275\u0275text(36),t.\u0275\u0275pipe(37,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(38,"mat-select",14)(39,"mat-option",15),t.\u0275\u0275text(40),t.\u0275\u0275pipe(41,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(42,"mat-option",15),t.\u0275\u0275text(43),t.\u0275\u0275pipe(44,"translate"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(45,"mat-form-field",8)(46,"mat-label"),t.\u0275\u0275text(47),t.\u0275\u0275pipe(48,"translate"),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(49,"input",16),t.\u0275\u0275elementEnd()()()()()()),2&n){const l=t.\u0275\u0275reference(31);t.\u0275\u0275property("title",t.\u0275\u0275pipeBind1(1,15,"GENERAL_TEXTS.BEELINA")),t.\u0275\u0275advance(5),t.\u0275\u0275property("busy",t.\u0275\u0275pipeBind1(6,17,r.$isLoading)),t.\u0275\u0275advance(4),t.\u0275\u0275property("formGroup",r.customerForm),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind1(13,19,"ADD_CUSTOMER_DETAILS_PAGE.FORM_CONTROL_SECTION.HEADER_TITLE")),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(18,21,"ADD_CUSTOMER_DETAILS_PAGE.FORM_CONTROL_SECTION.NAME_CONTROL.LABEL"),":"),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(23,23,"ADD_CUSTOMER_DETAILS_PAGE.FORM_CONTROL_SECTION.ADDRESS_CONTROL.LABEL"),":"),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(28,25,"ADD_CUSTOMER_DETAILS_PAGE.FORM_CONTROL_SECTION.PAYMENT_METHOD_CONTROL.LABEL"),":"),t.\u0275\u0275advance(2),t.\u0275\u0275property("matAutocomplete",l),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",t.\u0275\u0275pipeBind1(33,27,r.paymentMethodFilterOptions)),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(37,29,"ADD_CUSTOMER_DETAILS_PAGE.FORM_CONTROL_SECTION.OUTLET_TYPE_CONTROL.LABEL"),":"),t.\u0275\u0275advance(3),t.\u0275\u0275property("value","KEY_ACCOUNT"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(41,31,"ADD_CUSTOMER_DETAILS_PAGE.FORM_CONTROL_SECTION.OUTLET_TYPE_CONTROL.OPTIONS.KEY_ACCOUNT")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("value","GEN_TRADE"),t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",t.\u0275\u0275pipeBind1(44,33,"ADD_CUSTOMER_DETAILS_PAGE.FORM_CONTROL_SECTION.OUTLET_TYPE_CONTROL.OPTIONS.GEN_TRADE")," "),t.\u0275\u0275advance(4),t.\u0275\u0275textInterpolate1("",t.\u0275\u0275pipeBind1(48,35,"ADD_CUSTOMER_DETAILS_PAGE.FORM_CONTROL_SECTION.BARANGAY_CONTROL.LABEL"),":")}},dependencies:[c.sg,F.l,B.o,G.RK,v.Hw,O.Nt,S.KE,S.hX,h.gD,P.ey,d.XC,d.ZL,s.Fj,s.JJ,s.JL,s.sg,s.u,c.Ov,p.X$]})}return o})(),_=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.\u0275\u0275defineNgModule({type:o});static#a=this.\u0275inj=t.\u0275\u0275defineInjector({imports:[c.ez,T._,O.c,v.Ps,h.LD,d.Bb,s.UX,m.Bz.forChild([{path:"",component:x,title:"ADD_CUSTOMER_DETAILS_PAGE.TITLE"}]),p.aw.forChild()]})}return o})()}}]);