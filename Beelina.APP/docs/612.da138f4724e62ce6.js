(self.webpackChunkBeelina_APP=self.webpackChunkBeelina_APP||[]).push([[612],{3726:(rt,N,a)=>{"use strict";a.d(N,{C:()=>O});var i=a(6676);class O{static format(T,F="YYYY-MM-DD"){return T?i(T).format(F):""}static relativeTimeFormat(T){return i(T).startOf("hour").fromNow()}static isValidDate(T){return 1!==new Date(T).getFullYear()}}},2876:(rt,N,a)=>{"use strict";a.d(N,{e:()=>i});class i{static formatCurrency(O){return`\u20b1 ${O.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}}},1499:(rt,N,a)=>{"use strict";a.d(N,{u:()=>T});var i=a(4221),g=a(8002),O=a(62),C=a(803);class T extends C.y{constructor(u){super(u),this.store=u,this.store.dispatch(g.F()),this._subscription.add(this.store.pipe((0,i.select)(O.eV)).subscribe(y=>{this._dataStream.next(y)}))}fetchData(){this.store.dispatch(g.F())}}},6842:(rt,N,a)=>{"use strict";a.d(N,{x:()=>C});var i=a(2876),g=a(3432);class O extends g.J{constructor(){super()}}class C extends g.J{get priceFormatted(){return i.e.formatCurrency(this.price)}constructor(){super(),this.productUnit=new O}}},6729:(rt,N,a)=>{"use strict";a.d(N,{P:()=>C});var i=function(T){return T.Paid="PAID",T.Unpaid="UNPAID",T}(i||{}),g=a(2876),O=a(3432);class C extends O.J{get isPaid(){return this.status===i.Paid}get priceFormatted(){return g.e.formatCurrency(this.price)}}},1438:(rt,N,a)=>{"use strict";a.d(N,{M:()=>e});var i=a(8539),g=a(8180),O=a(7398),C=a(932),T=a(62),F=a(1348),u=a(6842),y=a(2006),M=a(5879),S=a(4221),x=a(3064);const A=i.Ps`
  query ($userAccountId: Int!, $cursor: String, $filterKeyword: String) {
    products(
      userAccountId: $userAccountId
      after: $cursor
      where: {
        or: [
          { name: { contains: $filterKeyword } }
          { code: { contains: $filterKeyword } }
        ]
      }
    ) {
      edges {
        cursor
        node {
          name
          code
          description
          stockQuantity
          pricePerUnit
          productUnit {
            id
            name
          }
        }
      }
      nodes {
        id
        name
        code
        description
        stockQuantity
        pricePerUnit
        price
        productUnit {
          id
          name
        }
      }
      pageInfo {
        endCursor
        hasNextPage
        hasPreviousPage
        startCursor
      }
    }
  }
`,Pt=i.Ps`
  query ($productId: Int!, $userAccountId: Int!) {
    product(productId: $productId, userAccountId: $userAccountId) {
      typename: __typename
      ... on ProductInformationResult {
        id
        name
        code
        description
        stockQuantity
        pricePerUnit
        price
        productUnit {
          name
        }
      }
      ... on ProductNotExistsError {
        message
      }
    }
  }
`,Y=i.Ps`
  mutation ($productInput: ProductInput!, $userAccountId: Int!) {
    updateProduct(
      input: { productInput: $productInput, userAccountId: $userAccountId }
    ) {
      product {
        name
      }
    }
  }
`,Z=i.Ps`
  mutation ($productId: Int!) {
    deleteProduct(input: { productId: $productId }) {
      product {
        name
      }
    }
  }
`,X=i.Ps`
  query ($productId: Int!, $productCode: String!) {
    checkProductCode(productId: $productId, productCode: $productCode) {
      typename: __typename
      ... on CheckProductCodeInformationResult {
        exists
      }
    }
  }
`,H=i.Ps`
  query (
    $userAccountId: Int!
    $productTransactionsInputs: [ProductTransactionInput!]!
  ) {
    validateProductionTransactionsQuantities(
      productTransactionsInputs: $productTransactionsInputs
      userAccountId: $userAccountId
    ) {
      productId
      productName
      productCode
      selectedQuantity
      currentQuantity
    }
  }
`,st=i.Ps`
  query ($textOrders: String!) {
    analyzeTextOrders(textOrders: $textOrders) {
      id
      productId
      productName
      quantity
      price
      currentQuantity
    }
  }
`,D=i.Ps`
  query {
    salesAgents {
      id
      firstName
      lastName
      username
    }
  }
`;let e=(()=>{class tt{constructor(V,Q,$){this.apollo=V,this.store=Q,this.storageService=$}getProducts(){let V=null,Q="",$=Array();this.store.select(T.g2).pipe((0,g.q)(1)).subscribe(U=>V=U),this.store.select(T.yW).pipe((0,g.q)(1)).subscribe(U=>Q=U),this.store.select(F.XI).pipe((0,g.q)(1)).subscribe(U=>$=U);const z=+this.storageService.getString("currentSalesAgentId");return this.apollo.watchQuery({query:A,variables:{cursor:V,filterKeyword:Q,userAccountId:z}}).valueChanges.pipe((0,O.U)(U=>{const lt=U.data.products,w=U.errors,J=lt.pageInfo.endCursor,R=lt.pageInfo.hasNextPage,W=lt.nodes.map(B=>{const ot=new u.x;return ot.id=B.id,ot.code=B.code,ot.name=B.name,ot.description=B.description,ot.stockQuantity=B.stockQuantity,ot.pricePerUnit=B.pricePerUnit,ot.price=B.price,ot.productUnit=B.productUnit,ot.deductedStock=0|-$.find(Et=>Et.productId===B.id)?.quantity,ot});if(W)return{endCursor:J,hasNextPage:R,products:W};if(w&&w.length>0)throw new Error(w[0].message);return null}))}getProduct(V){const Q=+this.storageService.getString("currentSalesAgentId");return this.apollo.watchQuery({query:Pt,variables:{productId:V,userAccountId:Q}}).valueChanges.pipe((0,C.g)(1e3),(0,O.U)($=>{const z=$.data.product;if("ProductInformationResult"===z.typename)return $.data.product;if("ProductNotExistsError"===z.typename)throw new Error($.data.product.message);return null}))}updateProductInformation(V){const Q={id:V.id,name:V.name,code:V.code,description:V.description,stockQuantity:V.stockQuantity,pricePerUnit:V.pricePerUnit,productUnitInput:{id:V.productUnit.id,name:V.productUnit.name}},$=+this.storageService.getString("currentSalesAgentId");return this.apollo.mutate({mutation:Y,variables:{productInput:Q,userAccountId:$}}).pipe((0,O.U)(z=>{const U=z.data.updateProduct,lt=U.product,w=U.errors;if(lt)return lt;if(w&&w.length>0)throw new Error(w[0].message);return null}))}deleteProduct(V){return this.apollo.mutate({mutation:Z,variables:{productId:V}}).pipe((0,O.U)(Q=>{const $=Q.data.deleteProduct,z=$.product,U=$.errors;if(z)return z;if(U&&U.length>0)throw new Error(U[0].message);return null}))}checkProductCodeExists(V,Q){return this.apollo.watchQuery({query:X,variables:{productId:V,productCode:Q}}).valueChanges.pipe((0,O.U)($=>"CheckProductCodeInformationResult"===$.data.checkProductCode.typename&&$.data.checkProductCode.exists))}validateProductionTransactionsQuantities(V){const Q=V.map(z=>({id:z.id,productId:z.productId,quantity:z.quantity,price:z.price,currentQuantity:z.currentQuantity})),$=+this.storageService.getString("currentSalesAgentId");return this.apollo.watchQuery({query:H,variables:{productTransactionsInputs:Q,userAccountId:$}}).valueChanges.pipe((0,O.U)(z=>z.data.validateProductionTransactionsQuantities.map(w=>({productId:w.productId,productName:w.productName,productCode:w.productCode,currentQuantity:w.currentQuantity,selectedQuantity:w.selectedQuantity}))))}analyzeTextOrders(V){return this.apollo.watchQuery({query:st,variables:{textOrders:V}}).valueChanges.pipe((0,O.U)(Q=>Q.data.analyzeTextOrders.map(U=>({productId:U.productId,productName:U.productName,price:U.price,quantity:U.quantity,currentQuantity:U.currentQuantity}))))}getSalesAgentsList(){return this.apollo.watchQuery({query:D}).valueChanges.pipe((0,O.U)(V=>V.data.salesAgents.map(z=>{const U=new y.n;return U.id=z.id,U.firstName=z.firstName,U.middleName=z.middleName,U.lastName=z.lastName,U.username=z.username,U})))}static#t=this.\u0275fac=function(Q){return new(Q||tt)(M.\u0275\u0275inject(i._M),M.\u0275\u0275inject(S.Store),M.\u0275\u0275inject(x.V))};static#e=this.\u0275prov=M.\u0275\u0275defineInjectable({token:tt,factory:tt.\u0275fac,providedIn:"root"})}return tt})()},8761:(rt,N,a)=>{"use strict";a.d(N,{On:()=>Q,YW:()=>tt,pX:()=>z});var i=a(8539),g=a(7398),O=a(8180),C=a(932),T=a(3432),F=a(6842),u=a(6729),y=a(3726),M=a(2876),S=a(9886),x=a(135),A=a(5879),Pt=a(4221);const Y=i.Ps`
  mutation ($transactionInput: TransactionInput!) {
    registerTransaction(input: { transactionInput: $transactionInput }) {
      transaction {
        id
      }
    }
  }
`,Z=i.Ps`
  query (
    $cursor: String
    $sortOrder: SortEnumType
    $transactionStatus: TransactionStatusEnum!
    $fromDate: String
    $toDate: String
  ) {
    transactionDates(
      after: $cursor
      order: [{ transactionDate: $sortOrder }]
      transactionStatus: $transactionStatus
      fromDate: $fromDate
      toDate: $toDate
    ) {
      edges {
        cursor
        node {
          transactionDate
          allTransactionsPaid
        }
      }
      nodes {
        transactionDate
        allTransactionsPaid
        numberOfUnPaidTransactions
      }
      pageInfo {
        endCursor
        hasNextPage
        hasPreviousPage
        startCursor
      }
    }
  }
`,X=i.Ps`
  query ($transactionDate: String!, $status: TransactionStatusEnum!) {
    transactionsByDate(transactionDate: $transactionDate, status: $status) {
      id
      storeId
      transactionDate
      hasUnpaidProductTransaction
      store {
        name
      }
    }
  }
`,H=i.Ps`
  query ($transactionId: Int!) {
    transaction(transactionId: $transactionId) {
      id
      storeId
      invoiceNo
      discount
      transactionDate
      hasUnpaidProductTransaction
      total
      balance
      dateCreatedFormatted
      store {
        id
        name
        address
        paymentMethod {
          name
        }
        barangay {
          name
        }
      }
      productTransactions {
        id
        transactionId
        productId
        quantity
        price
        status
        currentQuantity
        product {
          id
          code
          name
          price
        }
      }
    }
  }
`,st=i.Ps`
  mutation ($transactionId: Int!) {
    markTransactionAsPaid(input: { transactionId: $transactionId }) {
      transaction {
        id
      }
    }
  }
`,D=i.Ps`
  query {
    topProducts {
      id
      code
      name
      count
    }
  }
`,e=i.Ps`
  query ($fromDate: String!, $toDate: String!) {
    transactionSales(fromDate: $fromDate, toDate: $toDate) {
      sales
    }
  }
`;class tt extends T.J{get transactionDateFormatted(){return y.C.format(this.transactionDate,"MMM DD, YYYY")}get grossTotalFormatted(){return M.e.formatCurrency(this.total)}get netTotalFormatted(){return M.e.formatCurrency(this.total-this.discount/100*this.total)}get balanceFormatted(){return M.e.formatCurrency(this.balance)}constructor(){super(),this.productTransactions=new Array}}class ct{get transactionDateFormatted(){return y.C.format(this.transactionDate,"MMM DD, YYYY")}}class Q{constructor(){this.id=0}}class ${}let z=(()=>{class U{constructor(w,J){this.apollo=w,this.store=J}registerTransaction(w){const J={id:w.id,invoiceNo:w.invoiceNo,discount:w.discount,storeId:w.storeId,status:w.status,transactionDate:w.transactionDate,productTransactionInputs:w.productTransactions.map(R=>({id:R.id,productId:R.productId,quantity:R.quantity,price:R.price,currentQuantity:w.id>0?0:R.currentQuantity}))};return this.apollo.mutate({mutation:Y,variables:{transactionInput:J}}).pipe((0,g.U)(R=>{const j=R.data.registerTransaction,W=j.transaction,B=j.errors;if(W)return W;if(B&&B.length>0)throw new Error(B[0].message);return null}))}getTransactionsByDate(w,J){return this.apollo.watchQuery({query:X,variables:{transactionDate:w,status:J}}).valueChanges.pipe((0,g.U)(R=>R.data.transactionsByDate.map(j=>{const W=new tt;return W.id=j.id,W.storeId=j.storeId,W.store=j.store,W.hasUnpaidProductTransaction=j.hasUnpaidProductTransaction,W})))}getTransaction(w){return this.apollo.watchQuery({query:H,variables:{transactionId:w}}).valueChanges.pipe((0,g.U)(J=>{const R=J.data.transaction,j=new tt;return j.id=R.id,j.invoiceNo=R.invoiceNo,j.discount=R.discount,j.transactionDate=R.transactionDate,j.storeId=R.storeId,j.store=R.store,j.balance=R.balance,j.total=R.total,j.dateCreatedFormatted=R.dateCreatedFormatted,j.hasUnpaidProductTransaction=R.hasUnpaidProductTransaction,j.productTransactions=R.productTransactions.map(W=>{const B=new u.P;return B.id=W.id,B.quantity=W.quantity,B.currentQuantity=W.currentQuantity,B.price=W.price,B.status=W.status,B.productName=W.product.name,B.productId=W.product.id,B.product=new F.x,B.product.id=W.product.id,B.product.code=W.product.code,B.product.name=W.product.name,B.product.price=W.product.price,B}),j}))}getTransactioDates(w){let J=null,R=S.q.ASCENDING,j=null,W=null;return this.store.select(x.g2).pipe((0,O.q)(1)).subscribe(B=>J=B),this.store.select(x.F).pipe((0,O.q)(1)).subscribe(B=>R=B),this.store.select(x.yg).pipe((0,O.q)(1)).subscribe(B=>j=B),this.store.select(x.I4).pipe((0,O.q)(1)).subscribe(B=>W=B),this.apollo.watchQuery({query:Z,variables:{cursor:J,sortOrder:R,transactionStatus:w,fromDate:j,toDate:W}}).valueChanges.pipe((0,g.U)(B=>{const ot=B.data.transactionDates,Et=B.errors,Lt=ot.pageInfo.endCursor,Rt=ot.pageInfo.hasNextPage,bt=ot.nodes.map(Dt=>{const At=new ct;return At.transactionDate=Dt.transactionDate,At.numberOfUnPaidTransactions=Dt.numberOfUnPaidTransactions,At.allTransactionsPaid=Dt.allTransactionsPaid,At});if(bt)return{endCursor:Lt,hasNextPage:Rt,transactionDates:bt};if(Et&&Et.length>0)throw new Error(Et[0].message);return null}))}getTopProducts(){return this.apollo.watchQuery({query:D}).valueChanges.pipe((0,g.U)(w=>w.data.topProducts.map(R=>{const j=new $;return j.id=R.id,j.code=R.code,j.name=R.name,j.count=R.count,j})))}getTransactionSales(w="",J=""){return this.apollo.watchQuery({query:e,variables:{fromDate:w,toDate:J}}).valueChanges.pipe((0,C.g)(1e3),(0,g.U)(R=>R.data.transactionSales))}markTransactionAsPaid(w){return this.apollo.mutate({mutation:st,variables:{transactionId:w}}).pipe((0,g.U)(J=>{const R=J.data.markTransactionAsPaid,j=R.transaction,W=R.errors;if(j)return j;if(W&&W.length>0)throw new Error(W[0].message);return null}))}static#t=this.\u0275fac=function(J){return new(J||U)(A.\u0275\u0275inject(i._M),A.\u0275\u0275inject(Pt.Store))};static#e=this.\u0275prov=A.\u0275\u0275defineInjectable({token:U,factory:U.\u0275fac,providedIn:"root"})}return U})()},7178:(rt,N,a)=>{"use strict";a.d(N,{z:()=>Y});var i=a(6223),g=a(8005),O=a(9079),C=a(8002),T=a(6842),F=a(8897),u=a(5879),y=a(4221),M=a(1438),S=a(6610),x=a(2296),A=a(617),Pt=a(9515);let Y=(()=>{class Z extends F.H{constructor(H,st,D,e,tt){super(),this._bottomSheetRef=H,this.data=st,this.formBuilder=D,this.store=e,this.productService=tt,this._productTransactions=st.productTransactions,this._itemCounterForm=this.formBuilder.group({itemCounter:[0,i.kI.maxLength(100)]}),this._isLoading=!0,this.productService.getProduct(st.productId).subscribe(ct=>{this._isLoading=!1,this._product=new T.x,this._product.id=ct.id,this._product.code=ct.code,this._product.name=ct.name,this._product.description=ct.description,this._product.stockQuantity=ct.stockQuantity,this._product.price=ct.pricePerUnit,this._product.productUnit.name=ct.productUnit.name,this._productTransaction=this._productTransactions.find(V=>V.productId===st.productId),this._productTransaction&&this._itemCounterForm.get("itemCounter").setValue(this._productTransaction.quantity)})}ngOnInit(){}onConfirm(){let H=this._itemCounterForm.get("itemCounter").value;this.setItem(H),this._bottomSheetRef.dismiss()}onCancel(){this._bottomSheetRef.dismiss()}deductItem(){let H=this._itemCounterForm.get("itemCounter").value;H-=1,H>=0&&this._itemCounterForm.get("itemCounter").setValue(H)}addItem(){let H=this._itemCounterForm.get("itemCounter").value;H+=1,H<=this._product.stockQuantity&&this._itemCounterForm.get("itemCounter").setValue(H)}setItem(H){this.store.dispatch(O.Fn({code:this._product.code,productId:this._product.id,price:this._product.price,quantity:H,name:this._product.name})),this.store.dispatch(C.$_({deduction:H,productId:this._product.id}))}get product(){return this._product}get itemCounterForm(){return this._itemCounterForm}static#t=this.\u0275fac=function(st){return new(st||Z)(u.\u0275\u0275directiveInject(g.oL),u.\u0275\u0275directiveInject(g.OG),u.\u0275\u0275directiveInject(i.qu),u.\u0275\u0275directiveInject(y.Store),u.\u0275\u0275directiveInject(M.M))};static#e=this.\u0275cmp=u.\u0275\u0275defineComponent({type:Z,selectors:[["app-add-to-cart-product"]],features:[u.\u0275\u0275InheritDefinitionFeature],decls:43,vars:20,consts:[[1,"add-to-cart-container"],[1,"add-to-cart-container__header"],[3,"click"],[1,"add-to-cart-container__body"],[3,"busy"],[1,"product-information-container"],[1,"product-information-container__image-section"],[3,"src"],[1,"product-information-container__details"],[1,"product-name"],[1,"product-description"],[1,"product-price"],[1,"product-stock"],[1,"product-item-options-container"],[1,"product-item-options-container__options",3,"formGroup"],["mat-fab","","color","default",3,"click"],["type","number","readonly","","max","1000","formControlName","itemCounter",1,"stock-number-input"],["mat-fab","","color","primary",3,"click"],[1,"add-to-cart-container__footer"],[1,"button-container"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","default",3,"click"]],template:function(st,D){1&st&&(u.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"span"),u.\u0275\u0275text(3),u.\u0275\u0275pipe(4,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(5,"mat-icon",2),u.\u0275\u0275listener("click",function(){return D.onCancel()}),u.\u0275\u0275text(6,"cancel"),u.\u0275\u0275elementEnd()(),u.\u0275\u0275elementStart(7,"div",3)(8,"app-loader-layout",4)(9,"div",5)(10,"div",6),u.\u0275\u0275element(11,"img",7),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(12,"div",8)(13,"span",9),u.\u0275\u0275text(14),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(15,"span",10),u.\u0275\u0275text(16),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(17,"span",11)(18,"span"),u.\u0275\u0275text(19),u.\u0275\u0275elementEnd(),u.\u0275\u0275element(20,"br"),u.\u0275\u0275elementStart(21,"span"),u.\u0275\u0275text(22),u.\u0275\u0275elementEnd()(),u.\u0275\u0275elementStart(23,"span",12),u.\u0275\u0275text(24),u.\u0275\u0275pipe(25,"translate"),u.\u0275\u0275elementEnd()()(),u.\u0275\u0275elementStart(26,"div",13)(27,"div",14)(28,"button",15),u.\u0275\u0275listener("click",function(){return D.deductItem()}),u.\u0275\u0275elementStart(29,"mat-icon"),u.\u0275\u0275text(30,"remove_circle_outline"),u.\u0275\u0275elementEnd()(),u.\u0275\u0275element(31,"input",16),u.\u0275\u0275elementStart(32,"button",17),u.\u0275\u0275listener("click",function(){return D.addItem()}),u.\u0275\u0275elementStart(33,"mat-icon"),u.\u0275\u0275text(34,"add"),u.\u0275\u0275elementEnd()()()()()(),u.\u0275\u0275elementStart(35,"div",18)(36,"div",19)(37,"button",20),u.\u0275\u0275listener("click",function(){return D.onConfirm()}),u.\u0275\u0275text(38),u.\u0275\u0275pipe(39,"translate"),u.\u0275\u0275elementEnd(),u.\u0275\u0275elementStart(40,"button",21),u.\u0275\u0275listener("click",function(){return D.onCancel()}),u.\u0275\u0275text(41),u.\u0275\u0275pipe(42,"translate"),u.\u0275\u0275elementEnd()()()()),2&st&&(u.\u0275\u0275advance(3),u.\u0275\u0275textInterpolate(u.\u0275\u0275pipeBind1(4,12,"ADD_TO_CART_PAGE.TITLE")),u.\u0275\u0275advance(5),u.\u0275\u0275property("busy",D.isLoading),u.\u0275\u0275advance(3),u.\u0275\u0275property("src",D.getProductPhoto(null==D.product?null:D.product.name),u.\u0275\u0275sanitizeUrl),u.\u0275\u0275advance(3),u.\u0275\u0275textInterpolate(null==D.product?null:D.product.name),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate(null==D.product?null:D.product.description),u.\u0275\u0275advance(3),u.\u0275\u0275textInterpolate(null==D.product?null:D.product.priceFormatted),u.\u0275\u0275advance(3),u.\u0275\u0275textInterpolate1("per ",null==D.product?null:D.product.productUnit.name,""),u.\u0275\u0275advance(2),u.\u0275\u0275textInterpolate2("",u.\u0275\u0275pipeBind1(25,14,"ADD_TO_CART_PAGE.PRODUCT_INFORMATION_CONTAINER.STOCK_LEFT"),": ",null==D.product?null:D.product.stockQuantity,""),u.\u0275\u0275advance(3),u.\u0275\u0275property("formGroup",D.itemCounterForm),u.\u0275\u0275advance(11),u.\u0275\u0275textInterpolate1(" ",u.\u0275\u0275pipeBind1(39,16,"GENERAL_TEXTS.CONFIRM")," "),u.\u0275\u0275advance(3),u.\u0275\u0275textInterpolate1(" ",u.\u0275\u0275pipeBind1(42,18,"GENERAL_TEXTS.CANCEL")," "))},dependencies:[i.Fj,i.wV,i.JJ,i.JL,i.Fd,S.l,x.lW,x.cs,A.Hw,i.sg,i.u,Pt.X$],styles:[".add-to-cart-container[_ngcontent-%COMP%]{height:65vh;display:flex;flex-direction:column}.add-to-cart-container__header[_ngcontent-%COMP%]{font-size:16px;padding:15px;background-color:#d89c2a;color:#fff;display:flex;justify-content:space-between}.add-to-cart-container__body[_ngcontent-%COMP%]{flex:1}.add-to-cart-container__body[_ngcontent-%COMP%]   .product-information-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-direction:column;margin-bottom:30px}.add-to-cart-container__body[_ngcontent-%COMP%]   .product-information-container__image-section[_ngcontent-%COMP%]{align-self:center}.add-to-cart-container__body[_ngcontent-%COMP%]   .product-information-container__image-section[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:100px;width:100px;font-size:7em;color:#d89c2a}.add-to-cart-container__body[_ngcontent-%COMP%]   .product-information-container__image-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}.add-to-cart-container__body[_ngcontent-%COMP%]   .product-information-container__details[_ngcontent-%COMP%]{align-self:center;display:flex;flex-direction:column;height:160px;justify-content:space-between;text-align:center}.add-to-cart-container__body[_ngcontent-%COMP%]   .product-information-container__details[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-size:17px;font-weight:700}.add-to-cart-container__body[_ngcontent-%COMP%]   .product-information-container__details[_ngcontent-%COMP%]   .product-price[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .add-to-cart-container__body[_ngcontent-%COMP%]   .product-information-container__details[_ngcontent-%COMP%]   .product-stock[_ngcontent-%COMP%]{font-size:17px}.add-to-cart-container__body[_ngcontent-%COMP%]   .product-item-options-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.add-to-cart-container__body[_ngcontent-%COMP%]   .product-item-options-container__options[_ngcontent-%COMP%]{display:flex;gap:12px}.add-to-cart-container__body[_ngcontent-%COMP%]   .product-item-options-container__options[_ngcontent-%COMP%]   .stock-number-input[_ngcontent-%COMP%]{box-sizing:border- box;padding:12px;font-size:25px;border-radius:22px;text-align:center;width:125px}.add-to-cart-container__footer[_ngcontent-%COMP%]{display:flex;padding:15px}.add-to-cart-container__footer[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;gap:12px;width:100%}.add-to-cart-container__footer[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%}"]})}return Z})()},9079:(rt,N,a)=>{"use strict";a.d(N,{Fn:()=>F,IE:()=>M,LV:()=>g,X5:()=>T,_F:()=>O,eK:()=>u,j$:()=>C,ze:()=>y});var i=a(4221);const g=(0,i.createAction)("[Transaction] Initialize Product Transactions"),O=(0,i.createAction)("[Transaction] Initialize Product Transactions Success",(0,i.props)()),C=(0,i.createAction)("[Transaction] Get Product Transactions From Server",(0,i.props)()),T=(0,i.createAction)("[Transaction] Initialize Transaction Details",(0,i.props)()),F=(0,i.createAction)("[Transaction] Select Product",(0,i.props)()),u=(0,i.createAction)("[Transaction] Set SaveOrder Loading State",(0,i.props)()),y=(0,i.createAction)("[Transaction] Reset Transaction State"),M=(0,i.createAction)("[Transaction] Reset Product Transaction State")},6914:(rt,N,a)=>{"use strict";a.d(N,{l:()=>u});var i=a(4221),g=a(1835),O=a(6729),C=a(9079);const F={isLoading:!1,isUpdateLoading:!1,error:null,currentIdx:0,transaction:new(a(8761).YW),productTransactions:new Array},u=(0,i.createReducer)(F,(0,g.xy)(C._F,(y,M)=>{y.productTransactions=M.productTransactions}),(0,g.xy)(C.Fn,(y,M)=>{const S=y.productTransactions.findIndex(A=>A.productId===M.productId),x=new O.P;if(x.code=M.code,x.productId=M.productId,x.productName=M.name,x.price=M.price,x.quantity=M.quantity,x.currentQuantity=0,S<0){let A=y.currentIdx-1;x.id=0,y.currentIdx=A,y.productTransactions.push(x)}else 0!==M.quantity?y.productTransactions[S]=x:y.productTransactions.splice(S,1)}),(0,g.xy)(C.eK,(y,M)=>{y.isUpdateLoading=M.state}),(0,g.xy)(C.IE,(y,M)=>{y.productTransactions=F.productTransactions}),(0,g.xy)(C.ze,(y,M)=>{y.transaction=F.transaction}),(0,g.xy)(C.X5,(y,M)=>{y.transaction=M.transaction,y.productTransactions=M.transaction.productTransactions}))},1348:(rt,N,a)=>{"use strict";a.d(N,{U_:()=>C,XI:()=>O});var i=a(4221);const g=T=>T.productTransactions,O=(0,i.createSelector)(g,T=>T.productTransactions),C=(0,i.createSelector)(g,T=>T.transaction)},3384:(rt,N,a)=>{"use strict";a.d(N,{W:()=>x});var i=a(5879),g=a(8897),O=a(6814),C=a(6385),T=a(617),F=a(5210),u=a(7988),y=a(3680),M=a(9515);function S(A,Pt){if(1&A){const Y=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div")(1,"mat-icon",9),i.\u0275\u0275text(2,"more_vert"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"mat-menu",null,10)(5,"button",11),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(Y);const X=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(X.editProduct(X.productItem.id))}),i.\u0275\u0275elementStart(6,"mat-icon"),i.\u0275\u0275text(7,"border_color"),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(8),i.\u0275\u0275pipe(9,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"button",11),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(Y);const X=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(X.deleteProduct(X.productItem.id))}),i.\u0275\u0275elementStart(11,"mat-icon"),i.\u0275\u0275text(12,"delete"),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(13),i.\u0275\u0275pipe(14,"translate"),i.\u0275\u0275elementEnd()()()}if(2&A){const Y=i.\u0275\u0275reference(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("matMenuTriggerFor",Y),i.\u0275\u0275advance(7),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(9,3,"GENERAL_TEXTS.EDIT")," "),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(14,5,"GENERAL_TEXTS.REMOVE")," ")}}let x=(()=>{class A extends g.H{constructor(){super(),this.allowManageItem=!1,this.editItem=new i.EventEmitter,this.deleteItem=new i.EventEmitter,this.addItem=new i.EventEmitter}ngOnInit(){}editProduct(Y){this.editItem.emit(Y)}deleteProduct(Y){this.deleteItem.emit(Y)}addItemToCart(Y){this.addItem.emit(Y)}static#t=this.\u0275fac=function(Z){return new(Z||A)};static#e=this.\u0275cmp=i.\u0275\u0275defineComponent({type:A,selectors:[["app-product-card-item"]],inputs:{productItem:"productItem",allowManageItem:"allowManageItem"},outputs:{editItem:"editItem",deleteItem:"deleteItem",addItem:"addItem"},features:[i.\u0275\u0275InheritDefinitionFeature],decls:33,vars:20,consts:[["matRipple","",1,"product-item","list-container__card-item"],[1,"list-container__card-item-header","product-item__header"],["matBadgeColor","warn",3,"matBadge","matBadgeHidden"],[4,"ngIf"],[1,"list-container__card-item-body","product-item__body",3,"click"],[3,"src"],[1,"list-container__card-item-footer","product-item__footer",3,"click"],[1,"product-info"],[1,"product-info__label"],["matRipple","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"]],template:function(Z,X){1&Z&&(i.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-icon",2),i.\u0275\u0275text(3,"add_shopping_cart"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,S,15,7,"div",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"mat-divider"),i.\u0275\u0275elementStart(6,"div",4),i.\u0275\u0275listener("click",function(){return X.addItemToCart(X.productItem.id)}),i.\u0275\u0275element(7,"img",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",6),i.\u0275\u0275listener("click",function(){return X.addItemToCart(X.productItem.id)}),i.\u0275\u0275elementStart(9,"div",7)(10,"span",8),i.\u0275\u0275text(11),i.\u0275\u0275pipe(12,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"span"),i.\u0275\u0275text(14),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(15,"div",7)(16,"span",8),i.\u0275\u0275text(17),i.\u0275\u0275pipe(18,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(19,"span"),i.\u0275\u0275text(20),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(21,"div",7)(22,"span",8),i.\u0275\u0275text(23),i.\u0275\u0275pipe(24,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(25,"span"),i.\u0275\u0275text(26),i.\u0275\u0275elementEnd()(),i.\u0275\u0275elementStart(27,"div",7)(28,"span",8),i.\u0275\u0275text(29),i.\u0275\u0275pipe(30,"translate"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(31,"span"),i.\u0275\u0275text(32),i.\u0275\u0275elementEnd()()()()),2&Z&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("matBadge",X.productItem.deductedStock)("matBadgeHidden",0===X.productItem.deductedStock),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",X.allowManageItem),i.\u0275\u0275advance(3),i.\u0275\u0275property("src",X.getProductPhoto(X.productItem.name),i.\u0275\u0275sanitizeUrl),i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("",i.\u0275\u0275pipeBind1(12,12,"PRODUCTS_CATALOGUE_PAGE.PRODUCT_CARD_ITEM.CODE"),": "),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(X.productItem.code),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("",i.\u0275\u0275pipeBind1(18,14,"PRODUCTS_CATALOGUE_PAGE.PRODUCT_CARD_ITEM.NAME"),": "),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(X.productItem.name),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("",i.\u0275\u0275pipeBind1(24,16,"PRODUCTS_CATALOGUE_PAGE.PRODUCT_CARD_ITEM.STOCK"),": "),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(X.productItem.stockQuantity),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("",i.\u0275\u0275pipeBind1(30,18,"PRODUCTS_CATALOGUE_PAGE.PRODUCT_CARD_ITEM.PRICE"),": "),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate(X.productItem.priceFormatted))},dependencies:[O.O5,C.d,T.Hw,F.k,u.VK,u.OP,u.p6,y.wG,M.X$],styles:[".product-item[_ngcontent-%COMP%]{height:18em}.product-item__header[_ngcontent-%COMP%]{color:#fff;display:flex;justify-content:space-between;background-color:#d89c2a;padding:15px 10px 6px}.product-item__body[_ngcontent-%COMP%]{padding:.5em 1em;display:flex;justify-content:space-around;flex:1}.product-item__body[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:55px;width:85px;font-size:6em;align-self:center;color:#d89c2a}.product-item__body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px}.product-item__footer[_ngcontent-%COMP%]{padding:0 1em 1em}.product-item__footer[_ngcontent-%COMP%]   .product-info[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.product-item__footer[_ngcontent-%COMP%]   .product-info__label[_ngcontent-%COMP%]{font-weight:700}"]})}return A})()},3612:(rt,N,a)=>{"use strict";a.r(N),a.d(N,{ProductModule:()=>_e});var i=a(4221),g=a(5154),O=a(2741),C=a(9515),T=a(617),F=a(2032),u=a(6223),y=a(5210),M=a(7988),S=a(6814),x=a(3680),A=a(8005),Pt=a(2939),Y=a(8525),Z=a(6924),X=a(4190),H=a(7394),st=a(7178),D=a(8002),e=a(5879),tt=a(2296),ct=a(4170);let V=(()=>{class m{constructor(v,P,_,G,at){this._bottomSheetRef=v,this.formBuilder=P,this.router=_,this.store=G,this.translateService=at,this._orderForm=this.formBuilder.group({textOrder:["",u.kI.required]}),this._hintLabelText1=this.translateService.instant("TEXT_ORDER_DIALOG.FORM_CONTROL_SECTION.TEXT_ORDER_CONTROL.HINT_LABEL_1"),this._hintLabelText2=this.translateService.instant("TEXT_ORDER_DIALOG.FORM_CONTROL_SECTION.TEXT_ORDER_CONTROL.HINT_LABEL_2")}ngOnInit(){}setOrder(){const v=this._orderForm.get("textOrder").value;this.store.dispatch(D.KT({textOrders:v})),this.router.navigate(["product-catalogue/product-cart"]),this._bottomSheetRef.dismiss()}get orderForm(){return this._orderForm}get hintLabelText1(){return this._hintLabelText1}get hintLabelText2(){return this._hintLabelText2}static#t=this.\u0275fac=function(P){return new(P||m)(e.\u0275\u0275directiveInject(A.oL),e.\u0275\u0275directiveInject(u.qu),e.\u0275\u0275directiveInject(X.F0),e.\u0275\u0275directiveInject(i.Store),e.\u0275\u0275directiveInject(C.sK))};static#e=this.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["app-text-order"]],decls:19,vars:12,consts:[[1,"text-order-container","page-container",3,"formGroup"],[1,"panel"],[1,"panel__header-section"],[1,"panel__body-section"],[1,"page-information-description"],["appearance","fill"],["matInput","","type","text","rows","12","formControlName","textOrder",3,"placeholder"],[3,"innerHtml"],[1,"panel__footer-section"],["color","primary","mat-button","","mat-raised-button","",3,"click"]],template:function(P,_){1&P&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"label"),e.\u0275\u0275text(4),e.\u0275\u0275pipe(5,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(6,"div",3)(7,"span",4),e.\u0275\u0275text(8),e.\u0275\u0275pipe(9,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"mat-form-field",5)(11,"mat-label"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(14,"textarea",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"mat-hint",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",8)(17,"button",9),e.\u0275\u0275listener("click",function(){return _.setOrder()}),e.\u0275\u0275text(18," Set Order "),e.\u0275\u0275elementEnd()()()()),2&P&&(e.\u0275\u0275property("formGroup",_.orderForm),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(5,6,"TEXT_ORDER_DIALOG.TTTLE")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(9,8,"TEXT_ORDER_DIALOG.DESCRIPTION")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(13,10,"TEXT_ORDER_DIALOG.FORM_CONTROL_SECTION.TEXT_ORDER_CONTROL.LABEL")),e.\u0275\u0275advance(2),e.\u0275\u0275property("placeholder",_.hintLabelText1),e.\u0275\u0275advance(1),e.\u0275\u0275property("innerHtml",_.hintLabelText2,e.\u0275\u0275sanitizeHtml))},dependencies:[u.Fj,u.JJ,u.JL,tt.lW,F.Nt,ct.KE,ct.hX,ct.bx,u.sg,u.u,C.X$],styles:[".text-order-container[_ngcontent-%COMP%]{height:65vh}.text-order-container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.text-order-container[_ngcontent-%COMP%]   .panel__body-section[_ngcontent-%COMP%]{flex:1}.text-order-container[_ngcontent-%COMP%]   .panel__body-section[_ngcontent-%COMP%]   mat-hint[_ngcontent-%COMP%]{font-size:11px}.text-order-container[_ngcontent-%COMP%]   .panel__footer-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"]})}return m})();var Q=a(9014),$=a(9079),z=a(1348),U=a(62),lt=a(1499),w=a(8897),J=a(1416),R=a(3097),j=a(6618);let W=(()=>{class m extends w.H{constructor(v,P,_,G){super(),this._bottomSheetRef=v,this.data=P,this.authService=_,this.formBuilder=G,this._accountVerificationForm=this.formBuilder.group({username:["",u.kI.required],password:["",u.kI.required]}),this._accountVerificationForm.get("username").setValue(this.data.defaultUsername)}ngOnInit(){}onCancel(){this._bottomSheetRef.dismiss()}onConfirm(){const v=this._accountVerificationForm.get("username").value,P=this._accountVerificationForm.get("password").value;this._isLoading=!0,this.authService.verifyUserAccount(v,P).subscribe({next:_=>{this._isLoading=!1,this._bottomSheetRef.dismiss(_)},error:()=>{this._isLoading=!1,this._bottomSheetRef.dismiss(null)}})}get accountVerificationForm(){return this._accountVerificationForm}static#t=this.\u0275fac=function(P){return new(P||m)(e.\u0275\u0275directiveInject(A.oL),e.\u0275\u0275directiveInject(A.OG),e.\u0275\u0275directiveInject(j.e),e.\u0275\u0275directiveInject(u.qu))};static#e=this.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["app-account-verification"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:26,vars:16,consts:[[1,"dialog-form-container"],[1,"dialog-form-container__header"],[3,"click"],[1,"dialog-form-container__body",3,"formGroup"],["appearance","fill"],["matInput","","type","text","formControlName","username"],["matInput","","type","password","formControlName","password"],[1,"dialog-form-container__footer"],[1,"button-container"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","default",3,"click"]],template:function(P,_){1&P&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"span"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-icon",2),e.\u0275\u0275listener("click",function(){return _.onCancel()}),e.\u0275\u0275text(6,"cancel"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"div",3)(8,"mat-form-field",4)(9,"mat-label"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(12,"input",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"mat-form-field",4)(14,"mat-label"),e.\u0275\u0275text(15),e.\u0275\u0275pipe(16,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(17,"input",6),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(18,"div",7)(19,"div",8)(20,"button",9),e.\u0275\u0275listener("click",function(){return _.onConfirm()}),e.\u0275\u0275text(21),e.\u0275\u0275pipe(22,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(23,"button",10),e.\u0275\u0275listener("click",function(){return _.onCancel()}),e.\u0275\u0275text(24),e.\u0275\u0275pipe(25,"translate"),e.\u0275\u0275elementEnd()()()()),2&P&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(4,6,"ACCOUNT_VERIFICATION_DIALOG.TITLE")),e.\u0275\u0275advance(4),e.\u0275\u0275property("formGroup",_.accountVerificationForm),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(11,8,"AUTH_PAGE.AUTH_FORM.USERNAME_FIELD.LABEL"),":"),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(16,10,"AUTH_PAGE.AUTH_FORM.PASSWORD_FIELD.LABEL"),":"),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(22,12,"GENERAL_TEXTS.CONFIRM")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(25,14,"GENERAL_TEXTS.CLOSE")," "))},dependencies:[tt.lW,F.Nt,ct.KE,ct.hX,T.Hw,u.Fj,u.JJ,u.JL,u.sg,u.u,C.X$]})}return m})();var B=a(5253),ot=a(1438),Et=a(3064),Lt=a(6610),Rt=a(7673),bt=a(3427),Dt=a(3018),At=a(3384),ce=a(5180);function ue(m,ft){if(1&m){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",17),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(v);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.openTextOrderDialog())}),e.\u0275\u0275elementStart(1,"mat-icon",18),e.\u0275\u0275text(2,"add_comment"),e.\u0275\u0275elementEnd()()}}function de(m,ft){if(1&m){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",19),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(v);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.goToCart())}),e.\u0275\u0275elementStart(1,"mat-icon",20),e.\u0275\u0275text(2,"shopping_cart"),e.\u0275\u0275elementEnd()()}if(2&m){const v=e.\u0275\u0275nextContext();e.\u0275\u0275property("disabled",0===v.itemCounter),e.\u0275\u0275advance(1),e.\u0275\u0275property("matBadge",v.itemCounter)("matBadgeHidden",0===v.itemCounter)}}function qt(m,ft){if(1&m&&(e.\u0275\u0275elementStart(0,"mat-icon",21),e.\u0275\u0275text(1,"more_vert"),e.\u0275\u0275elementEnd()),2&m){e.\u0275\u0275nextContext();const v=e.\u0275\u0275reference(6);e.\u0275\u0275property("matMenuTriggerFor",v)}}function le(m,ft){if(1&m){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",22),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(v);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.openAllowManageProductDetailsDialog())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}2&m&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"PRODUCTS_CATALOGUE_PAGE.MANAGE_PRODUCT_DETAILS.ACTIVATE_MANAGE_PRODUCT_DETAILS")," "))}function pe(m,ft){if(1&m){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",22),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(v);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.deactivateAllowManageProductDetailsDialog())}),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275elementEnd()}2&m&&(e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,1,"PRODUCTS_CATALOGUE_PAGE.MANAGE_PRODUCT_DETAILS.DEACTIVATE_MANAGE_PRODUCT_DETAILS")," "))}function fe(m,ft){if(1&m&&(e.\u0275\u0275elementStart(0,"mat-option",27),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&m){const v=ft.$implicit;e.\u0275\u0275property("value",v.id),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(v.fullname)}}function me(m,ft){if(1&m){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",23)(1,"mat-form-field",24)(2,"mat-label"),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"mat-select",25),e.\u0275\u0275listener("ngModelChange",function(_){e.\u0275\u0275restoreView(v);const G=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(G.currentSalesAgentId=_)})("selectionChange",function(_){e.\u0275\u0275restoreView(v);const G=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(G.switchSaleAgent(_))}),e.\u0275\u0275template(6,fe,2,2,"mat-option",26),e.\u0275\u0275elementEnd()()()}if(2&m){const v=e.\u0275\u0275nextContext();e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1("",e.\u0275\u0275pipeBind1(4,3,"PRODUCTS_CATALOGUE_PAGE.SALES_AGENT_SELECT_CONTROL.LABEL"),":"),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngModel",v.currentSalesAgentId),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",v.salesAgents)}}function it(m,ft){if(1&m){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"app-product-card-item",28),e.\u0275\u0275listener("editItem",function(_){e.\u0275\u0275restoreView(v);const G=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(G.editProduct(_))})("deleteItem",function(_){e.\u0275\u0275restoreView(v);const G=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(G.deleteProduct(_))})("addItem",function(_){e.\u0275\u0275restoreView(v);const G=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(G.addItemToCart(_))}),e.\u0275\u0275elementEnd()()}if(2&m){const v=ft.$implicit,P=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("productItem",v)("allowManageItem",P.currentUserPermission>P.getPermissionLevel(P.permissionLevelEnum.User)||P.allowManageProductDetails)}}function Ot(m,ft){1&m&&(e.\u0275\u0275elementStart(0,"div",29)(1,"div",30)(2,"mat-icon"),e.\u0275\u0275text(3,"person_pin"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"label"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()()),2&m&&(e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,1,"PRODUCTS_CATALOGUE_PAGE.SALES_AGENT_SELECT_CONTROL.HINT")))}function _t(m,ft){if(1&m){const v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"app-floating-button",31),e.\u0275\u0275listener("tapButton",function(){e.\u0275\u0275restoreView(v);const _=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(_.addProduct())}),e.\u0275\u0275elementEnd()}2&m&&e.\u0275\u0275property("icon","add")}let vt=(()=>{class m extends w.H{constructor(v,P,_,G,at,mt,Gt,ie,Zt,Ut){super(),this.activatedRoute=v,this.authService=P,this.dialogService=_,this.bottomSheet=G,this.productService=at,this.router=mt,this.store=Gt,this.snackBarService=ie,this.storageService=Zt,this.translateService=Ut,this._subscription=new H.w0,this._allowManageProductDetails=!1,this.currentSalesAgentId=0,this._transactionId=+this.activatedRoute.snapshot.paramMap.get("transactionId"),this._allowManageProductDetails=JSON.parse(this.storageService.getString("allowManageProductDetails")),this.store.dispatch(D.tf()),this.store.dispatch($.LV()),this.$isLoading=this.store.pipe((0,i.select)(U.VO)),this._currentUser=this.authService.user.value,this._subscription.add(this.store.pipe((0,i.select)(z.XI)).subscribe(L=>{this._productTransactions=L,this._itemCounter=this._productTransactions.length,0===this._transactionId&&this.storageService.storeString("productTransactions",JSON.stringify(this._productTransactions))})),this.currentUserPermission===this.getPermissionLevel(R.i.User)?(this.currentSalesAgentId=this._currentUser.id,this.storageService.storeString("currentSalesAgentId",this._currentUser.id.toString()),this._dataSource=new lt.u(this.store)):this.productService.getSalesAgentsList().subscribe({next:L=>{this._salesAgents=L,this.storageService.hasKey("currentSalesAgentId")&&(this.currentSalesAgentId=+this.storageService.getString("currentSalesAgentId"),this._dataSource=new lt.u(this.store))}})}ngOnInit(){}ngOnDestroy(){this._subscription.unsubscribe(),this._dialogRef=null}goToCart(){this.router.navigate(["product-catalogue/product-cart"])}editProduct(v){this.router.navigate([`product-catalogue/edit-product/${v}`])}deleteProduct(v){this.dialogService.openConfirmation(this.translateService.instant("PRODUCTS_CATALOGUE_PAGE.DELETE_PRODUCT_DIALOG.TITLE"),this.translateService.instant("PRODUCTS_CATALOGUE_PAGE.DELETE_PRODUCT_DIALOG.CONFIRM")).subscribe(P=>{P===Q.E.YES&&this.productService.deleteProduct(v).subscribe({next:()=>{this.snackBarService.open(this.translateService.instant("PRODUCTS_CATALOGUE_PAGE.DELETE_PRODUCT_DIALOG.SUCCESS_MESSAGE"),this.translateService.instant("GENERAL_TEXTS.CLOSE")),this.store.dispatch(D.tf()),this.store.dispatch(D.F())},error:()=>{this.snackBarService.open(this.translateService.instant("PRODUCTS_CATALOGUE_PAGE.DELETE_PRODUCT_DIALOG.ERROR_MESSAGE"),this.translateService.instant("GENERAL_TEXTS.CLOSE"))}})})}addProduct(){this.router.navigate(["product-catalogue/add-product"])}addItemToCart(v){this.currentUserPermission===this.getPermissionLevel(R.i.User)&&this.bottomSheet.open(st.z,{data:{productId:v,productTransactions:this._productTransactions}})}openTextOrderDialog(){this.bottomSheet.open(V)}deactivateAllowManageProductDetailsDialog(){this._allowManageProductDetails=!1,this.storageService.storeString("allowManageProductDetails",JSON.stringify(this._allowManageProductDetails))}openAllowManageProductDetailsDialog(){const v=this.storageService.getString("allowManageProductDetailsDefaultUsername");this._dialogRef=this.bottomSheet.open(W,{data:{defaultUsername:v}}),this._dialogRef.afterDismissed().subscribe(P=>{if(void 0!==P)if(null!==P){const _=P.getModulePrivilege(J.X.Retail);_&&_>(0,R.O)(R.i.User)?(this._allowManageProductDetails=!0,this.storageService.storeString("allowManageProductDetailsDefaultUsername",P.username),this.storageService.storeString("allowManageProductDetails",JSON.stringify(this._allowManageProductDetails)),this.snackBarService.open(this.translateService.instant("PRODUCTS_CATALOGUE_PAGE.ALLOW_MANAGE_PRODUCT_DETAILS_DIALOG.SUCCESS_MESSAGE"),this.translateService.instant("GENERAL_TEXTS.CLOSE"))):this.snackBarService.open(this.translateService.instant("PRODUCTS_CATALOGUE_PAGE.ALLOW_MANAGE_PRODUCT_DETAILS_DIALOG.INVALID_USER_PRIVILEGE_MESSAGE"),this.translateService.instant("GENERAL_TEXTS.CLOSE"))}else this.snackBarService.open(this.translateService.instant("PRODUCTS_CATALOGUE_PAGE.ALLOW_MANAGE_PRODUCT_DETAILS_DIALOG.ERROR_MESSAGE"),this.translateService.instant("GENERAL_TEXTS.CLOSE"))})}onSearch(v){this.store.dispatch(D.tf()),this.store.dispatch(D.Cx({keyword:v})),this.store.dispatch(D.F())}switchSaleAgent(v){this.storageService.storeString("currentSalesAgentId",v.value.toString()),this.currentSalesAgentId=v.value,this.store.dispatch(D.tf()),this.store.dispatch($.LV()),this._dataSource?this.store.dispatch(D.F()):this._dataSource=new lt.u(this.store)}get itemCounter(){return this._itemCounter}get dataSource(){return this._dataSource}get currentUserPermission(){return this.modulePrivilege(J.X.Retail)}get allowManageProductDetails(){return this._allowManageProductDetails}get salesAgents(){return this._salesAgents}static#t=this.\u0275fac=function(P){return new(P||m)(e.\u0275\u0275directiveInject(X.gz),e.\u0275\u0275directiveInject(j.e),e.\u0275\u0275directiveInject(B.x),e.\u0275\u0275directiveInject(A.ch),e.\u0275\u0275directiveInject(ot.M),e.\u0275\u0275directiveInject(X.F0),e.\u0275\u0275directiveInject(i.Store),e.\u0275\u0275directiveInject(Pt.ux),e.\u0275\u0275directiveInject(Et.V),e.\u0275\u0275directiveInject(C.sK))};static#e=this.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["app-product"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:27,vars:25,consts:[[3,"title","showBackButton"],["mat-icon-button","","class","toolbar-option",3,"click",4,"ngIf"],["mat-icon-button","","class","toolbar-option",3,"disabled","click",4,"ngIf"],["matRipple","",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],[3,"busy"],[1,"page-container","slide-in-left-animation"],[1,"page-container__page-divider","scale-in-center-animation"],[1,"page-information-description"],["class","product-current-sales-agent-picker-container",4,"ngIf"],[3,"placeHolderTextIdentifier","onSearch"],[3,"templateType","count"],["itemSize","30","orientation","vertical",1,"list-container","product-list"],[4,"cdkVirtualFor","cdkVirtualForOf"],["class","no-selected-sales-agent-label-container",4,"ngIf"],[3,"icon","tapButton",4,"ngIf"],["mat-icon-button","",1,"toolbar-option",3,"click"],["matBadgeColor","warn"],["mat-icon-button","",1,"toolbar-option",3,"disabled","click"],["matBadgeColor","warn",3,"matBadge","matBadgeHidden"],["matRipple","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"product-current-sales-agent-picker-container"],["appearance","fill"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"productItem","allowManageItem","editItem","deleteItem","addItem"],[1,"no-selected-sales-agent-label-container"],[1,"no-selected-sales-agent-label"],[3,"icon","tapButton"]],template:function(P,_){1&P&&(e.\u0275\u0275elementStart(0,"app-tool-bar",0),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275template(2,ue,3,0,"button",1),e.\u0275\u0275template(3,de,3,3,"button",2),e.\u0275\u0275template(4,qt,2,1,"mat-icon",3),e.\u0275\u0275elementStart(5,"mat-menu",null,4),e.\u0275\u0275template(7,le,3,3,"button",5),e.\u0275\u0275template(8,pe,3,3,"button",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(9,"app-loader-layout",6),e.\u0275\u0275pipe(10,"async"),e.\u0275\u0275elementStart(11,"div",7)(12,"div",8)(13,"label"),e.\u0275\u0275text(14),e.\u0275\u0275pipe(15,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"br"),e.\u0275\u0275elementStart(17,"span",9),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(20,me,7,5,"div",10),e.\u0275\u0275elementStart(21,"app-search-field",11),e.\u0275\u0275listener("onSearch",function(at){return _.onSearch(at)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"app-list-container",12)(23,"cdk-virtual-scroll-viewport",13),e.\u0275\u0275template(24,it,2,2,"div",14),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(25,Ot,7,3,"div",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(26,_t,1,1,"app-floating-button",16),e.\u0275\u0275elementEnd()),2&P&&(e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,17,"GENERAL_TEXTS.BEELINA"))("showBackButton",!1),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.currentUserPermission<_.getPermissionLevel(_.permissionLevelEnum.Manager)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",_.currentUserPermission<_.getPermissionLevel(_.permissionLevelEnum.Manager)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",_.currentUserPermission<_.getPermissionLevel(_.permissionLevelEnum.Manager)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!_.allowManageProductDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",_.allowManageProductDetails),e.\u0275\u0275advance(1),e.\u0275\u0275property("busy",e.\u0275\u0275pipeBind1(10,19,_.$isLoading)),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(15,21,"PRODUCTS_CATALOGUE_PAGE.TITLE")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(19,23,"PRODUCTS_CATALOGUE_PAGE.DESCRIPTION")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",_.currentUserPermission>_.getPermissionLevel(_.permissionLevelEnum.User)),e.\u0275\u0275advance(1),e.\u0275\u0275property("placeHolderTextIdentifier","PRODUCTS_CATALOGUE_PAGE.SEARCH_TEXT_FIELD.PLACEHOLDER"),e.\u0275\u0275advance(1),e.\u0275\u0275property("templateType",_.emptyEntityTemplateEnum.PRODUCTS)("count",null==_.dataSource?null:_.dataSource.itemCount),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdkVirtualForOf",_.dataSource),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0===_.currentSalesAgentId&&_.currentUserPermission>_.getPermissionLevel(_.permissionLevelEnum.User)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",_.currentUserPermission>_.getPermissionLevel(_.permissionLevelEnum.User)||_.allowManageProductDetails))},dependencies:[S.sg,S.O5,u.JJ,u.On,Lt.l,Rt.X,bt.o,Dt.w,At.W,ce.r,tt.RK,T.Hw,O.xd,O.x0,O.N7,y.k,ct.KE,ct.hX,M.VK,M.OP,M.p6,x.wG,Y.gD,x.ey,S.Ov,C.X$],styles:[".product-current-sales-agent-picker-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.no-selected-sales-agent-label-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;height:400px;align-items:center}.no-selected-sales-agent-label-container[_ngcontent-%COMP%]   .no-selected-sales-agent-label[_ngcontent-%COMP%]{display:flex;align-items:center}.product-list[_ngcontent-%COMP%]{height:72vh}"]})}return m})();var yt=a(8761);function Ct(m,ft){if(1&m&&(e.\u0275\u0275elementStart(0,"div")(1,"div",10)(2,"span",11)(3,"span"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"span",12),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd()()()),2&m){const v=ft.$implicit;e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1("(",v.code,")"),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" - ",v.name,""),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(v.count)}}const te=[{path:"",redirectTo:"product-list",pathMatch:"full"},{path:"product-list",component:vt,title:"PRODUCTS_CATALOGUE_PAGE.TITLE"},{path:"product-list/:transactionId",component:vt,title:"PRODUCTS_CATALOGUE_PAGE.TITLE"},{path:"add-product",loadChildren:()=>Promise.all([a.e(630),a.e(592),a.e(734)]).then(a.bind(a,2734)).then(m=>m.AddProductDetailsModule)},{path:"edit-product/:id",loadChildren:()=>Promise.all([a.e(630),a.e(592),a.e(920)]).then(a.bind(a,1920)).then(m=>m.EditProductDetailsModule)},{path:"top-products",component:(()=>{class m extends w.H{constructor(v){super(),this.transactionService=v}ngOnInit(){this._isLoading=!0,setTimeout(()=>{this.transactionService.getTopProducts().subscribe(v=>{this._isLoading=!1,this._topProducts=v})},1e3)}get topProducts(){return this._topProducts}static#t=this.\u0275fac=function(P){return new(P||m)(e.\u0275\u0275directiveInject(yt.pX))};static#e=this.\u0275cmp=e.\u0275\u0275defineComponent({type:m,selectors:[["app-top-products"]],features:[e.\u0275\u0275InheritDefinitionFeature],decls:18,vars:14,consts:[[3,"title","showBackButton"],["mat-icon-button","",1,"toolbar-option"],["matBadgeColor","warn"],[3,"busy"],[1,"page-container","slide-in-left-animation"],[1,"page-container__page-divider","scale-in-center-animation"],[1,"page-information-description"],[3,"templateType","count"],["itemSize","60",1,"list-container","top-products-list-container"],[4,"cdkVirtualFor","cdkVirtualForOf"],["matRipple","",1,"list-container__item-section","top-products-list-container__item-section"],[1,"product-information"],[1,"product-number-of-transaction"]],template:function(P,_){1&P&&(e.\u0275\u0275elementStart(0,"app-tool-bar",0),e.\u0275\u0275pipe(1,"translate"),e.\u0275\u0275elementStart(2,"button",1)(3,"mat-icon",2),e.\u0275\u0275text(4,"search"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(5,"app-loader-layout",3)(6,"div",4)(7,"div",5)(8,"label"),e.\u0275\u0275text(9),e.\u0275\u0275pipe(10,"translate"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"br"),e.\u0275\u0275elementStart(12,"span",6),e.\u0275\u0275text(13),e.\u0275\u0275pipe(14,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"app-list-container",7)(16,"cdk-virtual-scroll-viewport",8),e.\u0275\u0275template(17,Ct,8,3,"div",9),e.\u0275\u0275elementEnd()()()()),2&P&&(e.\u0275\u0275property("title",e.\u0275\u0275pipeBind1(1,8,"GENERAL_TEXTS.BEELINA"))("showBackButton",!1),e.\u0275\u0275advance(5),e.\u0275\u0275property("busy",_.isLoading),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(10,10,"TOP_PRODUCTS_PAGE.TITLE")),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(14,12,"TOP_PRODUCTS_PAGE.DESCRIPTION")),e.\u0275\u0275advance(2),e.\u0275\u0275property("templateType",_.emptyEntityTemplateEnum.TOP_PRODUCTS)("count",null==_.topProducts?null:_.topProducts.length),e.\u0275\u0275advance(2),e.\u0275\u0275property("cdkVirtualForOf",_.topProducts))},dependencies:[Lt.l,Rt.X,bt.o,tt.RK,T.Hw,O.xd,O.x0,O.N7,x.wG,C.X$],styles:[".top-products-list-container[_ngcontent-%COMP%]{height:80vh}.top-products-list-container__item-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.top-products-list-container__item-section[_ngcontent-%COMP%]   .product-information[_ngcontent-%COMP%]{font-weight:700}.top-products-list-container__item-section[_ngcontent-%COMP%]   .product-number-of-transaction[_ngcontent-%COMP%]{padding:2px;background-color:#4fa94f;color:#fff;border-radius:15px;width:40px;display:block;text-align:center;font-weight:700}"]})}return m})(),title:"TOP_PRODUCTS_PAGE.TITLE"},{path:"product-cart",loadChildren:()=>Promise.all([a.e(630),a.e(38),a.e(263)]).then(a.bind(a,3263)).then(m=>m.ProductCartModule)}];let ee=(()=>{class m{static#t=this.\u0275fac=function(P){return new(P||m)};static#e=this.\u0275mod=e.\u0275\u0275defineNgModule({type:m});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[X.Bz.forChild(te),X.Bz]})}return m})();var wt=a(2805),Nt=a(179),et=a(8976),$t=a(7740),zt=a(6914),he=a(2812),Xt=a(1710),dt=a(4664),Qt=a(932),Tt=a(7398),Mt=a(6306),gt=a(2096);let Ht=(()=>{class m{constructor(v,P){this.actions$=v,this.productService=P,this.paymentMethods$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(D.F),(0,dt.w)(()=>this.productService.getProducts().pipe((0,Qt.g)(1e3),(0,Tt.U)(_=>D.sZ({products:_.products,endCursor:_.endCursor,hasNextPage:_.hasNextPage})),(0,Mt.K)(_=>(0,gt.of)(D.qE({error:_.message}))))))),this.analyzeTextOrders$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(D.KT),(0,dt.w)(_=>this.productService.analyzeTextOrders(_.textOrders).pipe((0,Tt.U)(G=>$._F({productTransactions:G})),(0,Mt.K)(G=>(0,gt.of)(D.qE({error:G.message})))))))}static#t=this.\u0275fac=function(P){return new(P||m)(e.\u0275\u0275inject(g.eX),e.\u0275\u0275inject(ot.M))};static#e=this.\u0275prov=e.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac})}return m})();var Bt=a(854),ne=a(8539),kt=a(8180),Ft=a(2267);const re=ne.Ps`
  query ($cursor: String) {
    productUnits(after: $cursor) {
      edges {
        cursor
        node {
          name
        }
      }
      nodes {
        id
        name
      }
      pageInfo {
        endCursor
        hasNextPage
        hasPreviousPage
        startCursor
      }
    }
  }
`;let jt=(()=>{class m{constructor(v,P){this.apollo=v,this.store=P}getProductUnits(){let v=null;return this.store.select(Ft.g2).pipe((0,kt.q)(1)).subscribe(P=>v=P),this.apollo.watchQuery({query:re,variables:{cursor:v}}).valueChanges.pipe((0,Tt.U)(P=>{const _=P.data.productUnits,G=P.errors,Gt=_.nodes;if(Gt)return{endCursor:_.pageInfo.endCursor,hasNextPage:_.pageInfo.hasNextPage,productUnits:Gt};if(G&&G.length>0)throw new Error(G[0].message);return null}))}static#t=this.\u0275fac=function(P){return new(P||m)(e.\u0275\u0275inject(ne._M),e.\u0275\u0275inject(i.Store))};static#e=this.\u0275prov=e.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})(),Yt=(()=>{class m{constructor(v,P){this.actions$=v,this.productUnitService=P,this.paymentMethods$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)(Bt.h0),(0,dt.w)(()=>this.productUnitService.getProductUnits().pipe((0,Tt.U)(_=>Bt.OB({productUnits:_.productUnits,endCursor:_.endCursor,hasNextPage:_.hasNextPage})),(0,Mt.K)(_=>(0,gt.of)(Bt.Zk({error:_.message})))))))}static#t=this.\u0275fac=function(P){return new(P||m)(e.\u0275\u0275inject(g.eX),e.\u0275\u0275inject(jt))};static#e=this.\u0275prov=e.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac})}return m})();var oe=a(6729);let pt=(()=>{class m{constructor(v,P,_){this.actions$=v,this.transactionService=P,this.storageService=_,this.productTransactionsFromLocalStorage$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)($.LV),(0,dt.w)(()=>{const G=JSON.parse(this.storageService.getString("productTransactions"));return G?(0,gt.of)($._F({productTransactions:G.map(at=>{const mt=new oe.P;return mt.code=at.code,mt.productId=at.productId,mt.productName=at.productName,mt.price=at.price,mt.quantity=at.quantity,mt.currentQuantity=at.currentQuantity,mt})})):(0,gt.of)()}))),this.productTransactionsFromServer$=(0,g.GW)(()=>this.actions$.pipe((0,g.l4)($.j$),(0,dt.w)(G=>this.transactionService.getTransaction(G.transactionId).pipe((0,Tt.U)(at=>$.X5({transaction:at}))))))}static#t=this.\u0275fac=function(P){return new(P||m)(e.\u0275\u0275inject(g.eX),e.\u0275\u0275inject(yt.pX),e.\u0275\u0275inject(Et.V))};static#e=this.\u0275prov=e.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac})}return m})(),Jt=(()=>{class m{constructor(v){this.store=v}canLoad(v,P){return this.store.pipe((0,i.select)(z.XI),(0,dt.w)(_=>(0,gt.of)(_.length>0)))}canActivate(v,P){return this.store.pipe((0,i.select)(z.XI),(0,dt.w)(_=>(0,gt.of)(_.length>0)))}static#t=this.\u0275fac=function(P){return new(P||m)(e.\u0275\u0275inject(i.Store))};static#e=this.\u0275prov=e.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac})}return m})(),xt=(()=>{class m{static#t=this.\u0275fac=function(P){return new(P||m)};static#e=this.\u0275mod=e.\u0275\u0275defineNgModule({type:m});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({imports:[S.ez,tt.ot,F.c,T.Ps,u.UX,C.aw.forChild()]})}return m})(),_e=(()=>{class m{static#t=this.\u0275fac=function(P){return new(P||m)};static#e=this.\u0275mod=e.\u0275\u0275defineNgModule({type:m});static#n=this.\u0275inj=e.\u0275\u0275defineInjector({providers:[Jt],imports:[S.ez,u.u5,Z._,O.Cl,ee,xt,y.g,T.Ps,F.c,M.Tx,x.si,A._r,Pt.ZX,Y.LD,u.UX,i.StoreModule.forFeature("barangays",wt.l),i.StoreModule.forFeature("products",et.l),i.StoreModule.forFeature("productUnits",$t.l),i.StoreModule.forFeature("customerStores",Nt.l),i.StoreModule.forFeature("productTransactions",zt.l),g.sQ.forFeature([he.C,Ht,Yt,Xt.Y,pt]),C.aw.forChild()]})}return m})()},8002:(rt,N,a)=>{"use strict";a.d(N,{$_:()=>u,Cx:()=>F,F:()=>g,Jk:()=>T,KT:()=>y,qE:()=>C,sZ:()=>O,tf:()=>M});var i=a(4221);const g=(0,i.createAction)("[Product] Get Products"),O=(0,i.createAction)("[Product] Get Product Success",(0,i.props)()),C=(0,i.createAction)("[Product] Get Product Error",(0,i.props)()),T=(0,i.createAction)("[Product] Set Update Product Loading State",(0,i.props)()),F=(0,i.createAction)("[Product] Search Products",(0,i.props)()),u=(0,i.createAction)("[Product] Set Product Deduction",(0,i.props)()),y=(0,i.createAction)("[Product] Analyze Text Orders",(0,i.props)()),M=(0,i.createAction)("[Product] Reset Product State")},8976:(rt,N,a)=>{"use strict";a.d(N,{l:()=>F});var i=a(4221),g=a(1835),O=a(6842),C=a(8002);const T={isLoading:!1,isUpdateLoading:!1,products:new Array,endCursor:null,filterKeyword:"",hasNextPage:!1,error:null},F=(0,i.createReducer)(T,(0,i.on)(C.F,(u,y)=>({...u,isLoading:!0})),(0,i.on)(C.sZ,(u,y)=>({...u,isLoading:!1,endCursor:y.endCursor,products:u.products.concat(y.products)})),(0,i.on)(C.qE,(u,y)=>({...u,error:y.error})),(0,i.on)(C.Cx,(u,y)=>({...u,filterKeyword:y.keyword})),(0,i.on)(C.tf,(u,y)=>({...T})),(0,g.xy)(C.$_,(u,y)=>{const M=u.products.findIndex(A=>A.id===y.productId),S=u.products[M],x=new O.x;x.id=S.id,x.name=S.name,x.description=S.description,x.stockQuantity=S.stockQuantity,x.pricePerUnit=S.pricePerUnit,x.price=S.price,x.productUnit=S.productUnit,x.deductedStock=-y.deduction,u.products[M]=x}))},62:(rt,N,a)=>{"use strict";a.d(N,{Cz:()=>y,VO:()=>F,eV:()=>O,g2:()=>C,yW:()=>M});var i=a(4221);const g=S=>S.products,O=(0,i.createSelector)(g,S=>S.products),C=(0,i.createSelector)(g,S=>S.endCursor),F=((0,i.createSelector)(g,S=>S.hasNextPage),(0,i.createSelector)(g,S=>S.isLoading)),y=((0,i.createSelector)(g,S=>S.error),(0,i.createSelector)(g,S=>S.isUpdateLoading)),M=(0,i.createSelector)(g,S=>S.filterKeyword)},135:(rt,N,a)=>{"use strict";a.d(N,{F:()=>M,I4:()=>x,Nz:()=>O,VO:()=>F,g2:()=>C,yg:()=>S});var i=a(4221);const g=A=>A.transactionDates,O=(0,i.createSelector)(g,A=>A.transactionDates),C=(0,i.createSelector)(g,A=>A.endCursor),F=((0,i.createSelector)(g,A=>A.hasNextPage),(0,i.createSelector)(g,A=>A.isLoading)),M=((0,i.createSelector)(g,A=>A.error),(0,i.createSelector)(g,A=>A.filterKeyword),(0,i.createSelector)(g,A=>A.sortOrder)),S=(0,i.createSelector)(g,A=>A.fromDate),x=(0,i.createSelector)(g,A=>A.toDate)},854:(rt,N,a)=>{"use strict";a.d(N,{OB:()=>O,Zk:()=>C,h0:()=>g});var i=a(4221);const g=(0,i.createAction)("[Product Units] Get Product Units"),O=(0,i.createAction)("[Product Units] Get Product Units Success",(0,i.props)()),C=(0,i.createAction)("[Product Units] Get Product Units Error",(0,i.props)())},7740:(rt,N,a)=>{"use strict";a.d(N,{l:()=>C});var i=a(4221),g=a(854);const O={isLoading:!1,isUpdateLoading:!1,productUnits:new Array,endCursor:null,filterKeyword:"",hasNextPage:!1,error:null},C=(0,i.createReducer)(O,(0,i.on)(g.h0,(T,F)=>({...T,isLoading:!0})),(0,i.on)(g.OB,(T,F)=>({...T,isLoading:!1,endCursor:F.endCursor,productUnits:T.productUnits.concat(F.productUnits)})),(0,i.on)(g.Zk,(T,F)=>({...T,error:F.error})))},2267:(rt,N,a)=>{"use strict";a.d(N,{WN:()=>O,g2:()=>C});var i=a(4221);const g=y=>y.productUnits,O=(0,i.createSelector)(g,y=>y.productUnits),C=(0,i.createSelector)(g,y=>y.endCursor);(0,i.createSelector)(g,y=>y.hasNextPage),(0,i.createSelector)(g,y=>y.isLoading),(0,i.createSelector)(g,y=>y.error)},1835:(rt,N,a)=>{var g=a(4221);a(5879);var F=function(t,n){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)o.hasOwnProperty(c)&&(r[c]=o[c])})(t,n)};function u(t,n){function r(){this.constructor=t}F(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function y(t){return"function"==typeof t}var M=!1,S={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){M=t},get useDeprecatedSynchronousErrorHandling(){return M}};function x(t){setTimeout(function(){throw t},0)}var A={closed:!0,next:function(t){},error:function(t){if(S.useDeprecatedSynchronousErrorHandling)throw t;x(t)},complete:function(){}},Pt=Array.isArray||function(t){return t&&"number"==typeof t.length};function Y(t){return null!==t&&"object"==typeof t}var Z=function(){function t(n){return Error.call(this),this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map(function(r,o){return o+1+") "+r.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n,this}return t.prototype=Object.create(Error.prototype),t}(),X=function(){function t(n){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,n&&(this._ctorUnsubscribe=!0,this._unsubscribe=n)}return t.prototype.unsubscribe=function(){var n;if(!this.closed){var r=this._parentOrParents,o=this._ctorUnsubscribe,c=this._unsubscribe,s=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof t)r.remove(this);else if(null!==r)for(var l=0;l<r.length;++l)r[l].remove(this);if(y(c)){o&&(this._unsubscribe=void 0);try{c.call(this)}catch(d){n=d instanceof Z?H(d.errors):[d]}}if(Pt(s)){l=-1;for(var p=s.length;++l<p;){var f=s[l];if(Y(f))try{f.unsubscribe()}catch(d){n=n||[],d instanceof Z?n=n.concat(H(d.errors)):n.push(d)}}}if(n)throw new Z(n)}},t.prototype.add=function(n){var r=n;if(!n)return t.EMPTY;switch(typeof n){case"function":r=new t(n);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var o=r;(r=new t)._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+n+" added to Subscription.")}var c=r._parentOrParents;if(null===c)r._parentOrParents=this;else if(c instanceof t){if(c===this)return r;r._parentOrParents=[c,this]}else{if(-1!==c.indexOf(this))return r;c.push(this)}var s=this._subscriptions;return null===s?this._subscriptions=[r]:s.push(r),r},t.prototype.remove=function(n){var r=this._subscriptions;if(r){var o=r.indexOf(n);-1!==o&&r.splice(o,1)}},t.EMPTY=((n=new t).closed=!0,n),t;var n}();function H(t){return t.reduce(function(n,r){return n.concat(r instanceof Z?r.errors:r)},[])}var st="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),D=function(t){function n(r,o,c){var s=t.call(this)||this;switch(s.syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=A;break;case 1:if(!r){s.destination=A;break}if("object"==typeof r){r instanceof n?(s.syncErrorThrowable=r.syncErrorThrowable,s.destination=r,r.add(s)):(s.syncErrorThrowable=!0,s.destination=new e(s,r));break}default:s.syncErrorThrowable=!0,s.destination=new e(s,r,o,c)}return s}return u(n,t),n.prototype[st]=function(){return this},n.create=function(r,o,c){var s=new n(r,o,c);return s.syncErrorThrowable=!1,s},n.prototype.next=function(r){this.isStopped||this._next(r)},n.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},n.prototype._next=function(r){this.destination.next(r)},n.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},n}(X),e=function(t){function n(r,o,c,s){var l,p=t.call(this)||this;p._parentSubscriber=r;var f=p;return y(o)?l=o:o&&(l=o.next,c=o.error,s=o.complete,o!==A&&(y((f=Object.create(o)).unsubscribe)&&p.add(f.unsubscribe.bind(f)),f.unsubscribe=p.unsubscribe.bind(p))),p._context=f,p._next=l,p._error=c,p._complete=s,p}return u(n,t),n.prototype.next=function(r){if(!this.isStopped&&this._next){var o=this._parentSubscriber;S.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable?this.__tryOrSetError(o,this._next,r)&&this.unsubscribe():this.__tryOrUnsub(this._next,r)}},n.prototype.error=function(r){if(!this.isStopped){var o=this._parentSubscriber,c=S.useDeprecatedSynchronousErrorHandling;if(this._error)c&&o.syncErrorThrowable?(this.__tryOrSetError(o,this._error,r),this.unsubscribe()):(this.__tryOrUnsub(this._error,r),this.unsubscribe());else if(o.syncErrorThrowable)c?(o.syncErrorValue=r,o.syncErrorThrown=!0):x(r),this.unsubscribe();else{if(this.unsubscribe(),c)throw r;x(r)}}},n.prototype.complete=function(){var r=this;if(!this.isStopped){var o=this._parentSubscriber;if(this._complete){var c=function(){return r._complete.call(r._context)};S.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable?(this.__tryOrSetError(o,c),this.unsubscribe()):(this.__tryOrUnsub(c),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(r,o){try{r.call(this._context,o)}catch(c){if(this.unsubscribe(),S.useDeprecatedSynchronousErrorHandling)throw c;x(c)}},n.prototype.__tryOrSetError=function(r,o,c){if(!S.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{o.call(this._context,c)}catch(s){return S.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=s,r.syncErrorThrown=!0,!0):(x(s),!0)}return!1},n.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},n}(D),tt="function"==typeof Symbol&&Symbol.observable||"@@observable";function ct(t){return t}var Q=function(){function t(n){this._isScalar=!1,n&&(this._subscribe=n)}return t.prototype.lift=function(n){var r=new t;return r.source=this,r.operator=n,r},t.prototype.subscribe=function(n,r,o){var c=this.operator,s=function(l,p,f){if(l){if(l instanceof D)return l;if(l[st])return l[st]()}return l||p||f?new D(l,p,f):new D(A)}(n,r,o);if(s.add(c?c.call(s,this.source):this.source||S.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),S.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},t.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(r){S.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=r),function(o){for(;o;){var c=o.destination;if(o.closed||o.isStopped)return!1;o=c&&c instanceof D?c:null}return!0}(n)?n.error(r):console.warn(r)}},t.prototype.forEach=function(n,r){var o=this;return new(r=$(r))(function(c,s){var l;l=o.subscribe(function(p){try{n(p)}catch(f){s(f),l&&l.unsubscribe()}},s,c)})},t.prototype._subscribe=function(n){var r=this.source;return r&&r.subscribe(n)},t.prototype[tt]=function(){return this},t.prototype.pipe=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return 0===n.length?this:function V(t){return 0===t.length?ct:1===t.length?t[0]:function(n){return t.reduce(function(r,o){return o(r)},n)}}(n)(this)},t.prototype.toPromise=function(n){var r=this;return new(n=$(n))(function(o,c){var s;r.subscribe(function(l){return s=l},function(l){return c(l)},function(){return o(s)})})},t.create=function(n){return new t(n)},t}();function $(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var U=function(t){return function(n){for(var r=0,o=t.length;r<o&&!n.closed;r++)n.next(t[r]);n.complete()}};!function(){function t(n,r){this.project=n,this.thisArg=r}t.prototype.call=function(n,r){return r.subscribe(new W(n,this.project,this.thisArg))}}();var W=function(t){function n(r,o,c){var s=t.call(this,r)||this;return s.project=o,s.count=0,s.thisArg=c||s,s}return u(n,t),n.prototype._next=function(r){var o;try{o=this.project.call(this.thisArg,r,this.count++)}catch(c){return void this.destination.error(c)}this.destination.next(o)},n}(D),ot=function B(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Et=function(t){if(t&&"function"==typeof t[tt])return o=t,function(s){var l=o[tt]();if("function"!=typeof l.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return l.subscribe(s)};if((s=t)&&"number"==typeof s.length&&"function"!=typeof s)return U(t);var s;if(function(s){return!!s&&"function"!=typeof s.subscribe&&"function"==typeof s.then}(t))return r=t,function(s){return r.then(function(l){s.closed||(s.next(l),s.complete())},function(l){return s.error(l)}).then(null,x),s};if(t&&"function"==typeof t[ot])return n=t,function(s){for(var l=n[ot]();;){var p=void 0;try{p=l.next()}catch(f){return s.error(f),s}if(p.done){s.complete();break}if(s.next(p.value),s.closed)break}return"function"==typeof l.return&&s.add(function(){l.return&&l.return()}),s};var n,r,o,c=Y(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+c+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},Lt=function(t){function n(r){var o=t.call(this)||this;return o.parent=r,o}return u(n,t),n.prototype._next=function(r){this.parent.notifyNext(r)},n.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},n.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},n}(D),Rt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return u(n,t),n.prototype.notifyNext=function(r){this.destination.next(r)},n.prototype.notifyError=function(r){this.destination.error(r)},n.prototype.notifyComplete=function(){this.destination.complete()},n}(D);!function(){function t(n,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=n,this.concurrent=r}t.prototype.call=function(n,r){return r.subscribe(new At(n,this.project,this.concurrent))}}();var At=function(t){function n(r,o,c){void 0===c&&(c=Number.POSITIVE_INFINITY);var s=t.call(this,r)||this;return s.project=o,s.concurrent=c,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return u(n,t),n.prototype._next=function(r){this.active<this.concurrent?this._tryNext(r):this.buffer.push(r)},n.prototype._tryNext=function(r){var o,c=this.index++;try{o=this.project(r,c)}catch(s){return void this.destination.error(s)}this.active++,this._innerSub(o)},n.prototype._innerSub=function(r){var o=new Lt(this),c=this.destination;c.add(o);var s=function(l,p){if(!p.closed){if(l instanceof Q)return l.subscribe(p);var f;try{f=Et(l)(p)}catch(d){p.error(d)}return f}}(r,o);s!==o&&c.add(s)},n.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},n.prototype.notifyNext=function(r){this.destination.next(r)},n.prototype.notifyComplete=function(){var r=this.buffer;this.active--,r.length>0?this._next(r.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},n}(Rt),ue=(function(){function t(n,r){this.predicate=n,this.thisArg=r}t.prototype.call=function(n,r){return r.subscribe(new ue(n,this.predicate,this.thisArg))}}(),function(t){function n(r,o,c){var s=t.call(this,r)||this;return s.predicate=o,s.thisArg=c,s.count=0,s}return u(n,t),n.prototype._next=function(r){var o;try{o=this.predicate.call(this.thisArg,r,this.count++)}catch(c){return void this.destination.error(c)}o&&this.destination.next(r)},n}(D));function qt(t,n,r){return t(r={path:n,exports:{},require:function(o,c){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},r.exports),r.exports}var le=qt(function(t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.identity=function(r){return r}});!function de(t){t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")}(qt(function(t,n){function r(o){return 0===o.length?le.identity:1===o.length?o[0]:function(c){return o.reduce(function(s,l){return l(s)},c)}}Object.defineProperty(n,"__esModule",{value:!0}),n.pipe=function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];return r(o)},n.pipeFromArray=r}));function it(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(l){return"'"+l+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ot(t){return!!t&&!!t[L]}function _t(t){return!!t&&(function(n){if(!n||"object"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var o=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return o===Object||"function"==typeof o&&Function.toString.call(o)===Ee}(t)||Array.isArray(t)||!!t[Ut]||!!t.constructor[Ut]||wt(t)||Nt(t))}function vt(t,n,r){void 0===r&&(r=!1),0===yt(t)?(r?Object.keys:Kt)(t).forEach(function(o){r&&"symbol"==typeof o||n(o,t[o],t)}):t.forEach(function(o,c){return n(c,o,t)})}function yt(t){var n=t[L];return n?n.i>3?n.i-4:n.i:Array.isArray(t)?1:wt(t)?2:Nt(t)?3:0}function Ct(t,n){return 2===yt(t)?t.has(n):Object.prototype.hasOwnProperty.call(t,n)}function Vt(t,n){return 2===yt(t)?t.get(n):t[n]}function te(t,n,r){var o=yt(t);2===o?t.set(n,r):3===o?(t.delete(n),t.add(r)):t[n]=r}function ee(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}function wt(t){return mt&&t instanceof Map}function Nt(t){return Gt&&t instanceof Set}function et(t){return t.o||t.t}function $t(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var n=ge(t);delete n[L];for(var r=Kt(n),o=0;o<r.length;o++){var c=r[o],s=n[c];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[c]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[c]})}return Object.create(Object.getPrototypeOf(t),n)}function zt(t,n){return void 0===n&&(n=!1),Xt(t)||Ot(t)||!_t(t)||(yt(t)>1&&(t.set=t.add=t.clear=t.delete=he),Object.freeze(t),n&&vt(t,function(r,o){return zt(o,!0)},!0)),t}function he(){it(2)}function Xt(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function dt(t){var n=ve[t];return n||it(18,t),n}function Tt(){return G}function Mt(t,n){n&&(dt("Patches"),t.u=[],t.s=[],t.v=n)}function gt(t){Ht(t),t.p.forEach(ne),t.p=null}function Ht(t){t===G&&(G=t.l)}function Bt(t){return G={p:[],l:G,h:t,m:!0,_:0}}function ne(t){var n=t[L];0===n.i||1===n.i?n.j():n.O=!0}function kt(t,n){n._=n.p.length;var r=n.p[0],o=void 0!==t&&t!==r;return n.h.g||dt("ES5").S(n,t,o),o?(r[L].P&&(gt(n),it(4)),_t(t)&&(t=Ft(n,t),n.l||jt(n,t)),n.u&&dt("Patches").M(r[L],t,n.u,n.s)):t=Ft(n,r,[]),gt(n),n.u&&n.v(n.u,n.s),t!==Zt?t:void 0}function Ft(t,n,r){if(Xt(n))return n;var o=n[L];if(!o)return vt(n,function(s,l){return re(t,o,n,s,l,r)},!0),n;if(o.A!==t)return n;if(!o.P)return jt(t,o.t,!0),o.t;if(!o.I){o.I=!0,o.A._--;var c=4===o.i||5===o.i?o.o=$t(o.k):o.o;vt(3===o.i?new Set(c):c,function(s,l){return re(t,o,c,s,l,r)}),jt(t,c,!1),r&&t.u&&dt("Patches").R(o,r,t.u,t.s)}return o.o}function re(t,n,r,o,c,s){if(Ot(c)){var l=Ft(t,c,s&&n&&3!==n.i&&!Ct(n.D,o)?s.concat(o):void 0);if(te(r,o,l),!Ot(l))return;t.m=!1}if(_t(c)&&!Xt(c)){if(!t.h.F&&t._<1)return;Ft(t,c),n&&n.A.l||jt(t,c)}}function jt(t,n,r){void 0===r&&(r=!1),t.h.F&&t.m&&zt(n,r)}function Yt(t,n){var r=t[L];return(r?et(r):t)[n]}function oe(t,n){if(n in t)for(var r=Object.getPrototypeOf(t);r;){var o=Object.getOwnPropertyDescriptor(r,n);if(o)return o;r=Object.getPrototypeOf(r)}}function pt(t){t.P||(t.P=!0,t.l&&pt(t.l))}function Jt(t){t.o||(t.o=$t(t.t))}function xt(t,n,r){var o=wt(n)?dt("MapSet").N(n,r):Nt(n)?dt("MapSet").T(n,r):t.g?function(c,s){var l=Array.isArray(c),p={i:l?1:0,A:s?s.A:Tt(),P:!1,I:!1,D:{},l:s,t:c,k:null,o:null,j:null,C:!1},f=p,d=Wt;l&&(f=[p],d=se);var h=Proxy.revocable(f,d),E=h.revoke,b=h.proxy;return p.k=b,p.j=E,b}(n,r):dt("ES5").J(n,r);return(r?r.A:Tt()).p.push(o),o}function m(t,n){switch(n){case 2:return new Map(t);case 3:return Array.from(t)}return $t(t)}var _,G,at=typeof Symbol<"u"&&"symbol"==typeof Symbol("x"),mt=typeof Map<"u",Gt=typeof Set<"u",ie=typeof Proxy<"u"&&void 0!==Proxy.revocable&&typeof Reflect<"u",Zt=at?Symbol.for("immer-nothing"):((_={})["immer-nothing"]=!0,_),Ut=at?Symbol.for("immer-draftable"):"__$immer_draftable",L=at?Symbol.for("immer-state"):"__$immer_state",Ee=(typeof Symbol<"u"&&Symbol,""+Object.prototype.constructor),Kt=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,ge=Object.getOwnPropertyDescriptors||function(t){var n={};return Kt(t).forEach(function(r){n[r]=Object.getOwnPropertyDescriptor(t,r)}),n},ve={},Wt={get:function(t,n){if(n===L)return t;var c,p,f,r=et(t);if(!Ct(r,n))return c=t,(f=oe(r,n))?"value"in f?f.value:null===(p=f.get)||void 0===p?void 0:p.call(c.k):void 0;var o=r[n];return t.I||!_t(o)?o:o===Yt(t.t,n)?(Jt(t),t.o[n]=xt(t.A.h,o,t)):o},has:function(t,n){return n in et(t)},ownKeys:function(t){return Reflect.ownKeys(et(t))},set:function(t,n,r){var o=oe(et(t),n);if(o?.set)return o.set.call(t.k,r),!0;if(!t.P){var c=Yt(et(t),n),s=c?.[L];if(s&&s.t===r)return t.o[n]=r,t.D[n]=!1,!0;if(ee(r,c)&&(void 0!==r||Ct(t.t,n)))return!0;Jt(t),pt(t)}return t.o[n]===r&&"number"!=typeof r&&(void 0!==r||n in t.o)||(t.o[n]=r,t.D[n]=!0,!0)},deleteProperty:function(t,n){return void 0!==Yt(t.t,n)||n in t.t?(t.D[n]=!1,Jt(t),pt(t)):delete t.D[n],t.o&&delete t.o[n],!0},getOwnPropertyDescriptor:function(t,n){var r=et(t),o=Reflect.getOwnPropertyDescriptor(r,n);return o&&{writable:!0,configurable:1!==t.i||"length"!==n,enumerable:o.enumerable,value:r[n]}},defineProperty:function(){it(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){it(12)}},se={};vt(Wt,function(t,n){se[t]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}}),se.deleteProperty=function(t,n){return Wt.deleteProperty.call(this,t[0],n)},se.set=function(t,n,r){return Wt.set.call(this,t[0],n,r,t[0])};var ht=new(function(){function t(r){var o=this;this.g=ie,this.F=!0,this.produce=function(c,s,l){if("function"==typeof c&&"function"!=typeof s){var p=s;s=c;var f=o;return function(I){var K=this;void 0===I&&(I=p);for(var k=arguments.length,nt=Array(k>1?k-1:0),q=1;q<k;q++)nt[q-1]=arguments[q];return f.produce(I,function(ut){var St;return(St=s).call.apply(St,[K,ut].concat(nt))})}}var d;if("function"!=typeof s&&it(6),void 0!==l&&"function"!=typeof l&&it(7),_t(c)){var h=Bt(o),E=xt(o,c,void 0),b=!0;try{d=s(E),b=!1}finally{b?gt(h):Ht(h)}return typeof Promise<"u"&&d instanceof Promise?d.then(function(I){return Mt(h,l),kt(I,h)},function(I){throw gt(h),I}):(Mt(h,l),kt(d,h))}if(!c||"object"!=typeof c)return(d=s(c))===Zt?void 0:(void 0===d&&(d=c),o.F&&zt(d,!0),d);it(21,c)},this.produceWithPatches=function(c,s){return"function"==typeof c?function(f){for(var d=arguments.length,h=Array(d>1?d-1:0),E=1;E<d;E++)h[E-1]=arguments[E];return o.produceWithPatches(f,function(b){return c.apply(void 0,[b].concat(h))})}:[o.produce(c,s,function(f,d){l=f,p=d}),l,p];var l,p},"boolean"==typeof r?.useProxies&&this.setUseProxies(r.useProxies),"boolean"==typeof r?.autoFreeze&&this.setAutoFreeze(r.autoFreeze)}var n=t.prototype;return n.createDraft=function(r){_t(r)||it(8),Ot(r)&&(r=function _e(t){return Ot(t)||it(22,t),function n(r){if(!_t(r))return r;var o,c=r[L],s=yt(r);if(c){if(!c.P&&(c.i<4||!dt("ES5").K(c)))return c.t;c.I=!0,o=m(r,s),c.I=!1}else o=m(r,s);return vt(o,function(l,p){c&&Vt(c.t,l)===p||te(o,l,n(p))}),3===s?new Set(o):o}(t)}(r));var o=Bt(this),c=xt(this,r,void 0);return c[L].C=!0,Ht(o),c},n.finishDraft=function(r,o){var s=(r&&r[L]).A;return Mt(s,o),kt(void 0,s)},n.setAutoFreeze=function(r){this.F=r},n.setUseProxies=function(r){r&&!ie&&it(20),this.g=r},n.applyPatches=function(r,o){var c;for(c=o.length-1;c>=0;c--){var s=o[c];if(0===s.path.length&&"replace"===s.op){r=s.value;break}}var l=dt("Patches").$;return Ot(r)?l(r,o):this.produce(r,function(p){return l(p,o.slice(c+1))})},t}()),ye=ht.produce;ht.produceWithPatches.bind(ht),ht.setAutoFreeze.bind(ht),ht.setUseProxies.bind(ht),ht.applyPatches.bind(ht),ht.createDraft.bind(ht),ht.finishDraft.bind(ht),N.xy=function(...t){const n=t.pop();return g.on(...t,function Pe(t){return(n,r)=>ye(n,o=>t(o,r))}(n))}}}]);